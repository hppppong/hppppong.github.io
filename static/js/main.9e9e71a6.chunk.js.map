{"version":3,"sources":["components/Button.tsx","components/Place.tsx","hooks/useCamera.ts","containers/Welcome/index.tsx","assets/cross.svg","assets/tick.svg","assets/crossBlack.svg","assets/greenTick.svg","containers/Confirm/AutoLeaveModal.tsx","containers/Confirm/LeaveModal.tsx","components/DatePicker.tsx","containers/Confirm/TimePickModal.tsx","assets/checkbox.svg","assets/checkboxChecked.svg","components/CheckBox.tsx","containers/Confirm/index.tsx","utils/qr.ts","assets/qrOverlay.svg","utils/mediaStream.ts","components/MediaStream.tsx","components/QRCodeReader.tsx","assets/back.svg","components/Header.tsx","containers/QRReader/index.tsx","assets/plus.svg","components/PWAPrompt.tsx","hooks/useInstallPrompt.ts","assets/baseIcon.png","containers/QRGeneartor/QRPreview.tsx","containers/QRGeneartor/index.tsx","components/AnimatedSwitch.tsx","containers/CameraSetting/index.tsx","App.tsx","utils/appCheck.ts","serviceWorkerRegistration.ts","index.tsx"],"names":["ConfirmButton","styled","button","props","disabled","shadowed","ModalConfirmButton","Place","value","onChange","placeholder","readOnly","rest","StyledInput","e","target","async","TextareaAutosize","constate","useState","navigator","hasCameraSupport","useLocalStorage","cameraId","setCameraId","cameraList","setCameraList","initCameraList","useCallback","a","hasIn","mediaDevices","enumerateDevices","deviceList","filter","device","kind","alert","useEffect","any","deviceId","UseCameraProvider","useCamera","Welcome","place","setPlace","PageWrapper","ContentWrapper","Msg","ActionWrapper","to","isEmpty","trim","LinkWrapper","StyledLink","pathname","search","div","Link","AutoLeaveModal","isModalOpen","onCancel","onConfirm","selectedAutoLeaveHour","date","autoLeaveHourTmp","setAutoLeaveHourTmp","toDate","useMemo","add","isOpen","onRequestClose","style","overlay","backgroundColor","content","outline","border","padding","borderRadius","width","position","top","left","transform","height","overflow","ariaHideApp","onAfterOpen","root","document","querySelector","disableBodyScroll","CrossWrapper","Cross","src","crossBlack","onClick","Title","HourListWrapper","id","HourList","map","hour","HourListItem","SelectedTick","greenTick","TimeWrapper","format","img","h1","ul","li","LeaveModal","onLeaveNow","onLeaved","autoLeaveHour","shouldDisplayAutoLeave","Time","AutoLeave","GreenButton","DatePicker","forwardRef","ref","useImperativeHandle","init","ele","Picker","inline","rows","Wrapper","className","TimePickModal","datePickerRef","useRef","current","TimePickerWrapper","CheckBox","checked","handleClick","isAndroid","StyledCheckbox","color","IOSCheckBox","checkboxChecked","checkbox","Checkbox","Confirm","browserHistory","useHistory","browserLocation","useLocation","autoLeave","setAutoLeave","setAutoLeaveHour","isAutoLeaveModalOpen","setIsAutoLeaveModalOpen","isLeaveModalOpen","setIsLeaveModalOpen","isTimePickModalOpen","setIsTimePickModalOpen","URLSearchParams","get","push","dayjs","handleLeavePage","cross","MessageWrapper","PlaceWrapper","TickWrapper","TickWrapperInner","Tick","tick","ActionGroup","CheckBoxWrapper","Change","LeaveMessage","Header","getVenueName","input","startsWith","decodedJson","venueId","substring","computedHash","getHash","base64Data","json","JSON","parse","decodeURIComponent","escape","window","atob","console","log","decodedData","hashMatch","hash","qrDecode","trimmedZhName","nameZh","nameEn","string","sha256","qrEncode","typeEn","typeZh","type","venueCode","venueID","metadata","btoa","unescape","encodeURIComponent","stringify","getMediaStream","getUserMedia","video","facingMode","audio","isIOS","MediaStream","onFrame","videoRef","canvasRef","useRafLoop","canvasElement","videoElement","readyState","HAVE_ENOUGH_DATA","canvas","getContext","videoHeight","videoWidth","drawImage","imageData","getImageData","loopStop","loopStart","initMediaStream","undefined","stream","srcObject","play","getTracks","forEach","track","stop","Video","playsInline","Canvas","QRCodeReader","onDecode","handleFrame","code","jsQR","data","inversionAttempts","name","backPath","BackButton","back","QRReader","Message","VideoContainer","Overlay","qrOverlay","PWAPrompt","onDismiss","prompt","setState","handleBeforeInstallPrompt","preventDefault","handleAppInstalled","addEventListener","removeEventListener","Promise","reject","Error","useInstallPrompt","promptToInstall","onInstall","AddIcon","plus","InstructionWrapper","InstallButtonWrapper","Button","variant","QRPreview","onLeave","imgRef","encodedString","QrCodeWithLogo","image","logo","customImg","baseIcon","logoRadius","borderSize","toImage","StyledPlace","StyledQrCode","alt","Address","addressZh","addressEn","QRGenerator","fileFieldRef","React","showPreview","setShowPreview","qrCode","setQrCode","useSetState","state","isVenueCodeValid","length","isVenueIdValid","isValidData","useMount","StyledForm","StyledTextField","label","error","inputProps","maxLength","StyledInputWrapper","StyledFileInput","accept","files","Array","from","head","reader","FileReader","readAsDataURL","onload","String","result","Divider","Actions","ButtonGroup","aria-label","size","startIcon","downloadImage","FormGroup","TextField","AnimatedSwitch","StyledSwitch","atEnter","opacity","offset","zIndex","atLeave","atActive","val","spring","stiffness","damping","mapStyles","styles","Switch","CameraSetting","FormWrapper","StyledFormControl","InputLabel","Select","labelId","MenuItem","isNil","FormControl","App","matchMedia","matches","test","location","hostname","showPWAPrompt","setShowPWAPrompt","adapter","browserDetails","browser","version","GlobalStyle","basename","exact","path","createGlobalStyle","isLocalhost","Boolean","match","registerValidSW","swUrl","config","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","ReactDOM","render","StrictMode","getElementById","URL","process","href","origin","fetch","headers","response","contentType","status","indexOf","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.9e9e71a6.chunk.js","sourcesContent":["import styled from \"styled-components\";\n\nexport const ConfirmButton = styled.button<{ shadowed?: boolean }>`\n  display: block;\n  margin: auto;\n  margin-bottom: 16px;\n  font-size: 24px;\n  padding: 10px 0;\n  width: 80%;\n  border-radius: 48px;\n  flex-shrink: 0;\n  max-width: 280px;\n  font-weight: 500;\n\n  ${(props) =>\n    props.disabled\n      ? `background-color: #D3D3D3;\n        color: #A1A1A1;\n        `\n      : `\n        background-color: #fed426;\n      `}\n\n  border: 0;\n  outline: none;\n  ${(props) =>\n    props.shadowed ? \"box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.5);\" : \"\"}\n\n  &:focus {\n    outline: none;\n    text-decoration: none;\n  }\n`;\n\nexport const ModalConfirmButton = styled(ConfirmButton)`\n  font-size: 16px;\n  padding: 12px 0;\n  width: 90%;\n  font-weight: unset;\n`;\n","import styled from \"styled-components\";\nimport React from \"react\";\nimport TextareaAutosize from \"react-autosize-textarea\";\n\ntype Props = {\n  value: string;\n  onChange?: (value: string) => void;\n  placeholder?: string;\n  readOnly?: boolean;\n};\n\nexport const Place = ({\n  value,\n  onChange,\n  placeholder,\n  readOnly,\n  ...rest\n}: Props) => {\n  return (\n    <StyledInput\n      value={value}\n      placeholder={placeholder}\n      readOnly={readOnly}\n      onChange={(e: any) => {\n        onChange && onChange(e.target.value);\n      }}\n      async\n      {...rest}\n    />\n  );\n};\n\nexport const StyledInput = styled(TextareaAutosize)`\n  text-align: center;\n  font-size: 32px;\n  background-color: transparent;\n  border: 0;\n  outline: none;\n  margin: 4px 0;\n  color: #fed426;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n  width: 100%;\n\n  padding-left: 0;\n  padding-right: 0;\n  line-height: 36px;\n  font-weight: 500;\n\n  &:focus {\n    outline: none;\n  }\n`;\n","import { any, hasIn } from \"ramda\";\nimport { useLocalStorage } from \"react-use\";\nimport constate from \"constate\";\nimport { useCallback, useEffect, useState } from \"react\";\n\nexport const [UseCameraProvider, useCamera] = constate(() => {\n  const [hasCameraSupport] = useState(\"mediaDevices\" in navigator);\n\n  const [cameraId, setCameraId] = useLocalStorage(\n    \"preferred_camera_id\",\n    \"AUTO\"\n  );\n  const [cameraList, setCameraList] = useState<InputDeviceInfo[] | null>(null);\n\n  const initCameraList = useCallback(async () => {\n    try {\n      if (\n        !hasCameraSupport ||\n        !hasIn(\"enumerateDevices\", navigator.mediaDevices)\n      ) {\n        setCameraList([]);\n        return;\n      }\n\n      const deviceList = await navigator.mediaDevices.enumerateDevices();\n\n      const cameraList = deviceList.filter<InputDeviceInfo>(\n        (device): device is InputDeviceInfo => device.kind === \"videoinput\"\n      );\n\n      setCameraList(cameraList);\n    } catch (e) {\n      alert(\"Unable to list device.\\n\\n\" + e);\n    }\n  }, [hasCameraSupport]);\n\n  useEffect(() => {\n    initCameraList();\n  }, [hasCameraSupport, initCameraList]);\n\n  useEffect(() => {\n    if (\n      cameraList !== null &&\n      cameraId !== \"AUTO\" &&\n      !any(({ deviceId }) => deviceId === cameraId, cameraList)\n    ) {\n      setCameraId(\"AUTO\");\n    }\n  }, [cameraList, setCameraId, cameraId]);\n\n  return {\n    cameraId: !any(({ deviceId }) => deviceId === cameraId, cameraList || [])\n      ? \"AUTO\"\n      : cameraId,\n    cameraList: cameraList || [],\n    setCameraId,\n    hasCameraSupport,\n  };\n});\n","import { isEmpty, trim } from \"ramda\";\nimport React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { ConfirmButton } from \"../../components/Button\";\nimport { Place } from \"../../components/Place\";\nimport { useCamera } from \"../../hooks/useCamera\";\n\nexport const Welcome = () => {\n  const { hasCameraSupport } = useCamera();\n  const [place, setPlace] = useState(\"\");\n\n  return (\n    <PageWrapper>\n      <ContentWrapper>\n        <Msg>我想去</Msg>\n        <Place value={place} onChange={setPlace} placeholder=\"輸入地址\" />\n      </ContentWrapper>\n      <ActionWrapper>\n        {hasCameraSupport && (\n          <Link to={\"/qrReader\"}>\n            <ConfirmButton shadowed>掃瞄二維碼</ConfirmButton>\n          </Link>\n        )}\n        {!isEmpty(trim(place)) && (\n          <LinkWrapper>\n            <StyledLink\n              to={{ pathname: \"/confirm\", search: `?place=${place}` }}\n            >\n              話去就去!\n            </StyledLink>\n          </LinkWrapper>\n        )}\n      </ActionWrapper>\n    </PageWrapper>\n  );\n};\n\nconst PageWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n  display: flex;\n  flex-direction: column;\n`;\n\nconst ContentWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n`;\n\nconst Msg = styled.div`\n  color: #ffffff;\n  text-align: center;\n  font-size: 15px;\n`;\n\nconst ActionWrapper = styled.div`\n  width: 100%;\n  text-align: center;\n  color: #fff;\n  padding: 32px 0;\n  flex-shrink: 0;\n`;\n\nconst LinkWrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  width: 100%;\n  margin: 8px 0;\n`;\n\nconst StyledLink = styled(Link)`\n  color: #ffffff;\n  padding: 0 16px;\n`;\n","export default __webpack_public_path__ + \"static/media/cross.d2bbc7f7.svg\";","export default __webpack_public_path__ + \"static/media/tick.6d45b966.svg\";","export default __webpack_public_path__ + \"static/media/crossBlack.aafc0aee.svg\";","export default __webpack_public_path__ + \"static/media/greenTick.5e528318.svg\";","import React, { useState, useEffect, useMemo } from \"react\";\nimport Modal from \"react-modal\";\nimport crossBlack from \"../../assets/crossBlack.svg\";\nimport greenTick from \"../../assets/greenTick.svg\";\n\nimport styled from \"styled-components\";\nimport { ModalConfirmButton } from \"../../components/Button\";\nimport { disableBodyScroll } from \"body-scroll-lock\";\nimport { Dayjs } from \"dayjs\";\n\ntype Props = {\n  isModalOpen: boolean;\n  onCancel: () => void;\n  onConfirm: (value: number) => void;\n  selectedAutoLeaveHour: number;\n  date: Dayjs;\n};\n\nexport const AutoLeaveModal = ({\n  isModalOpen,\n  onCancel,\n  onConfirm,\n  selectedAutoLeaveHour,\n  date,\n}: Props) => {\n  const [autoLeaveHourTmp, setAutoLeaveHourTmp] = useState(\n    selectedAutoLeaveHour\n  );\n\n  useEffect(() => {\n    setAutoLeaveHourTmp(selectedAutoLeaveHour);\n  }, [setAutoLeaveHourTmp, selectedAutoLeaveHour]);\n\n  const handleConfirm = () => {\n    onConfirm(autoLeaveHourTmp);\n  };\n\n  const toDate = useMemo(() => date.add(autoLeaveHourTmp, \"hour\"), [\n    date,\n    autoLeaveHourTmp,\n  ]);\n\n  const disableScroll = () => {\n    const root = document.querySelector(\"#scroll\");\n    if (!root) return;\n    disableBodyScroll(root);\n  };\n\n  return (\n    <Modal\n      isOpen={isModalOpen}\n      onRequestClose={onCancel}\n      style={{\n        overlay: {\n          backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n        },\n        content: {\n          outline: \"none\",\n          border: \"0\",\n          padding: \"16px\",\n          borderRadius: \"8px\",\n          width: \"240px\",\n          position: \"absolute\",\n          top: \"50%\",\n          left: \"50%\",\n          transform: \"translate(-50%, -50%)\",\n          height: \"370px\",\n          overflow: \"hidden\",\n        },\n      }}\n      ariaHideApp={false}\n      onAfterOpen={disableScroll}\n    >\n      <CrossWrapper>\n        <Cross src={crossBlack} onClick={onCancel} />\n      </CrossWrapper>\n      <Title>設罝自動離開時間</Title>\n      <HourListWrapper id=\"scroll\">\n        <HourList>\n          {[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((hour) => (\n            <HourListItem\n              onClick={() => {\n                setAutoLeaveHourTmp(hour);\n              }}\n              key={hour}\n            >\n              + {hour}小時\n              {autoLeaveHourTmp === hour && <SelectedTick src={greenTick} />}\n            </HourListItem>\n          ))}\n        </HourList>\n      </HourListWrapper>\n      <TimeWrapper>\n        <div>於{date.format(\"MM-DD HH:mm\")} 進入場所</div>\n        <div>於{toDate.format(\"MM-DD HH:mm\")} 自動離開</div>\n      </TimeWrapper>\n      <ModalConfirmButton onClick={handleConfirm}>確認</ModalConfirmButton>\n    </Modal>\n  );\n};\n\nconst Cross = styled.img`\n  height: 20px;\n`;\n\nconst CrossWrapper = styled.div`\n  display: flex;\n  width: 100%;\n  justify-content: flex-end;\n`;\n\nconst Title = styled.h1`\n  font-size: 20px;\n  text-align: center;\n  margin-top: 20px;\n  margin-bottom: 0;\n`;\n\nconst HourListWrapper = styled.div`\n  overflow: auto;\n  height: 180px;\n  padding: 0 8px;\n`;\n\nconst HourList = styled.ul`\n  list-style: none;\n  margin: 0;\n  padding: 0;\n`;\n\nconst HourListItem = styled.li`\n  line-height: 40px;\n  border-bottom: 1px #eeeeee solid;\n  padding: 0 8px;\n`;\n\nconst TimeWrapper = styled.div`\n  font-size: 12px;\n  text-align: center;\n  padding: 16px 0;\n`;\n\nconst SelectedTick = styled.img`\n  height: 32px;\n  position: relative;\n  float: right;\n  top: 4px;\n`;\n","import React, { useMemo } from \"react\";\nimport Modal from \"react-modal\";\nimport crossBlack from \"../../assets/crossBlack.svg\";\n\nimport styled from \"styled-components\";\nimport { ModalConfirmButton } from \"../../components/Button\";\nimport { Dayjs } from \"dayjs\";\n\ntype Props = {\n  isModalOpen: boolean;\n  onCancel: () => void;\n  onLeaveNow: () => void;\n  onLeaved: () => void;\n  place: string;\n  date: Dayjs;\n  autoLeaveHour: number;\n};\n\nexport const LeaveModal = ({\n  isModalOpen,\n  onCancel,\n  onLeaveNow,\n  onLeaved,\n  place,\n  date,\n  autoLeaveHour,\n}: Props) => {\n  const shouldDisplayAutoLeave = autoLeaveHour !== 0;\n\n  const toDate = useMemo(() => date.add(autoLeaveHour, \"hour\"), [\n    date,\n    autoLeaveHour,\n  ]);\n\n  return (\n    <Modal\n      isOpen={isModalOpen}\n      onRequestClose={onCancel}\n      style={{\n        overlay: {\n          backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n        },\n        content: {\n          outline: \"none\",\n          border: \"0\",\n          padding: \"16px\",\n          borderRadius: \"8px\",\n          width: \"240px\",\n          position: \"absolute\",\n          top: \"50%\",\n          left: \"50%\",\n          transform: \"translate(-50%, -50%)\",\n          height: shouldDisplayAutoLeave ? \"430px\" : \"390px\",\n          overflow: \"hidden\",\n        },\n      }}\n      ariaHideApp={false}\n    >\n      <CrossWrapper>\n        <Cross src={crossBlack} onClick={onCancel} />\n      </CrossWrapper>\n      <Msg>你已進入場所</Msg>\n      <Place>{place}</Place>\n      <Time>{date.format(\"YYYY-MM-DD HH:mm\")}</Time>\n      <Title>你現在要離開嗎？</Title>\n      {shouldDisplayAutoLeave && (\n        <AutoLeave>於{toDate.format(\"MM-DD HH:mm\")} 自動離開</AutoLeave>\n      )}\n      <ModalConfirmButton onClick={onLeaveNow}>\n        是的，我現在要離開\n      </ModalConfirmButton>\n      <GreenButton onClick={onLeaved}>我現已經離開了</GreenButton>\n    </Modal>\n  );\n};\n\nconst Cross = styled.img`\n  height: 20px;\n`;\n\nconst CrossWrapper = styled.div`\n  display: flex;\n  width: 100%;\n  justify-content: flex-end;\n  margin-bottom: 8px;\n`;\n\nconst Title = styled.div`\n  font-size: 20px;\n  text-align: center;\n  margin: 64px 0;\n  font-weight: 500;\n`;\n\nconst GreenButton = styled(ModalConfirmButton)`\n  background-color: #12b188;\n  color: #fff;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n`;\n\nconst Msg = styled.div`\n  text-align: center;\n  font-size: 16px;\n`;\n\nconst Time = styled.div`\n  text-align: center;\n  font-size: 14px;\n`;\n\nconst Place = styled.div`\n  color: unset;\n  text-shadow: none;\n  text-align: center;\n  font-size: 28px;\n  font-weight: 500;\n  line-height: 48px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n`;\n\nconst AutoLeave = styled.div`\n  font-size: 12px;\n  text-align: center;\n  padding: 12px 0;\n`;\n","import React, { forwardRef, useImperativeHandle } from \"react\";\n\nimport styled from \"styled-components\";\nimport Picker from \"pickerjs\";\nimport \"pickerjs/dist/picker.min.css\";\n\nexport type DatePickerHandler = {\n  init: () => void;\n};\n\nexport const DatePicker = forwardRef((props: any, ref: any) => {\n  // mount effect wont work on model, need to call this after onAfterOpen event\n  useImperativeHandle(ref, () => ({\n    init: () => {\n      const ele = document.querySelector(\n        \".js-inline-picker\"\n      ) as HTMLElement | null;\n      if (!ele) return;\n      new Picker(ele, {\n        inline: true,\n        rows: 2,\n      });\n    },\n  }));\n\n  return (\n    <Wrapper>\n      <div className=\"js-inline-picker\" />\n    </Wrapper>\n  );\n});\n\nconst Wrapper = styled.div`\n  & .picker {\n    font-size: 12px;\n  }\n\n  & .picker-dialog {\n    border: 0;\n  }\n\n  & .picker-cell:before {\n    background-image: unset;\n  }\n\n  & .picker-cell:after {\n    background-image: unset;\n  }\n\n  & .picker-picked {\n    color: unset;\n    border-top: #12b188 1px solid;\n    border-bottom: #12b188 1px solid;\n  }\n\n  & .picker-cell {\n    padding: 0 4px;\n  }\n\n  & .picker-item {\n    padding: 3px 0px;\n  }\n\n  & .picker-cell + .picker-cell {\n    border: 0;\n  }\n`;\n","import React, { useRef } from \"react\";\nimport Modal from \"react-modal\";\nimport crossBlack from \"../../assets/crossBlack.svg\";\n\nimport styled from \"styled-components\";\nimport { ModalConfirmButton } from \"../../components/Button\";\nimport { DatePicker, DatePickerHandler } from \"../../components/DatePicker\";\n\ntype Props = {\n  isModalOpen: boolean;\n  onCancel: () => void;\n  onConfirm: () => void;\n};\n\nexport const TimePickModal = ({ isModalOpen, onCancel, onConfirm }: Props) => {\n  const datePickerRef = useRef<DatePickerHandler>(null);\n\n  const initPicker = () => {\n    datePickerRef.current && datePickerRef.current.init();\n  };\n\n  return (\n    <Modal\n      isOpen={isModalOpen}\n      onRequestClose={onCancel}\n      style={{\n        overlay: {\n          backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n        },\n        content: {\n          outline: \"none\",\n          border: \"0\",\n          padding: \"16px\",\n          borderRadius: \"8px\",\n          width: \"240px\",\n          position: \"absolute\",\n          top: \"50%\",\n          left: \"50%\",\n          transform: \"translate(-50%, -50%)\",\n          height: \"280px\",\n          overflow: \"hidden\",\n        },\n      }}\n      ariaHideApp={false}\n      onAfterOpen={initPicker}\n    >\n      <CrossWrapper>\n        <Cross src={crossBlack} onClick={onCancel} />\n      </CrossWrapper>\n      <Title>你是什麼時候離開？</Title>\n      <TimePickerWrapper>\n        <DatePicker ref={datePickerRef} />\n      </TimePickerWrapper>\n      <ModalConfirmButton onClick={onConfirm}>確認</ModalConfirmButton>\n    </Modal>\n  );\n};\n\nconst Cross = styled.img`\n  height: 20px;\n`;\n\nconst CrossWrapper = styled.div`\n  display: flex;\n  width: 100%;\n  justify-content: flex-end;\n`;\n\nconst Title = styled.div`\n  font-size: 20px;\n  text-align: center;\n  margin-top: 24px;\n`;\n\nconst TimePickerWrapper = styled.div`\n  border-bottom: 1px #eeeeee solid;\n  border-top: 1px #eeeeee solid;\n  padding: 32px 0;\n  margin: 16px 0;\n`;\n","export default __webpack_public_path__ + \"static/media/checkbox.4e2450ab.svg\";","export default __webpack_public_path__ + \"static/media/checkboxChecked.7f6c2da0.svg\";","import React from \"react\";\nimport styled from \"styled-components\";\nimport checkbox from \"../assets/checkbox.svg\";\nimport checkboxChecked from \"../assets/checkboxChecked.svg\";\nimport { isAndroid } from \"react-device-detect\";\nimport { Checkbox } from \"@material-ui/core\";\n\ntype Props = {\n  checked: boolean;\n  onChange: (value: boolean) => void;\n};\n\nexport const CheckBox = ({ onChange, checked }: Props) => {\n  const handleClick = () => {\n    onChange(!checked);\n  };\n\n  return isAndroid ? (\n    <StyledCheckbox checked={checked} onClick={handleClick} color=\"primary\" />\n  ) : (\n    <IOSCheckBox\n      src={checked ? checkboxChecked : checkbox}\n      onClick={handleClick}\n    />\n  );\n};\n\nconst IOSCheckBox = styled.img`\n  height: 32px;\n  display: inline-block;\n  vertical-align: top;\n  margin: 0 8px;\n`;\n\nconst StyledCheckbox = styled(Checkbox)`\n  display: inline-block;\n  vertical-align: top;\n  margin: 0 8px !important;\n  padding: 0 !important;\n\n  &.MuiCheckbox-colorPrimary {\n    color: #fff !important;\n  }\n`;\n","import React, { useEffect, useMemo, useState } from \"react\";\nimport styled from \"styled-components\";\nimport cross from \"../../assets/cross.svg\";\n\nimport tick from \"../../assets/tick.svg\";\n\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\nimport { ConfirmButton } from \"../../components/Button\";\nimport { Place } from \"../../components/Place\";\nimport { AutoLeaveModal } from \"./AutoLeaveModal\";\nimport { LeaveModal } from \"./LeaveModal\";\nimport { TimePickModal } from \"./TimePickModal\";\nimport { isEmpty, trim } from \"ramda\";\nimport { CheckBox } from \"../../components/CheckBox\";\nimport dayjs from \"dayjs\";\n\nexport const Confirm = () => {\n  const browserHistory = useHistory();\n  const browserLocation = useLocation();\n  const [autoLeave, setAutoLeave] = useState(true);\n  const [autoLeaveHour, setAutoLeaveHour] = useState(4);\n  const [isAutoLeaveModalOpen, setIsAutoLeaveModalOpen] = useState(false);\n  const [isLeaveModalOpen, setIsLeaveModalOpen] = useState(false);\n  const [isTimePickModalOpen, setIsTimePickModalOpen] = useState(false);\n\n  const place = useMemo(\n    () => trim(new URLSearchParams(browserLocation.search).get(\"place\") || \"\"),\n    [browserLocation.search]\n  );\n\n  useEffect(() => {\n    if (!place || isEmpty(place)) browserHistory.push(\"/\");\n  }, [browserHistory, place]);\n\n  const date = useMemo(() => dayjs(), []);\n\n  const handleSetAutoLeaveHour = (value: number) => {\n    setAutoLeaveHour(value);\n    setIsAutoLeaveModalOpen(false);\n  };\n\n  const handleLeavePage = () => {\n    setIsAutoLeaveModalOpen(false);\n    setIsLeaveModalOpen(false);\n    setIsTimePickModalOpen(false);\n    browserHistory.push(\"/\");\n  };\n\n  const handleLeaved = () => {\n    setIsLeaveModalOpen(false);\n    setIsTimePickModalOpen(true);\n  };\n\n  return (\n    <>\n      <PageWrapper>\n        <Header>\n          <Link to=\"/\">\n            <Cross src={cross} />\n          </Link>\n        </Header>\n        <MessageWrapper>\n          <Msg>你已進入場所</Msg>\n          <PlaceWrapper>\n            <Place value={place || \"\"} readOnly />\n          </PlaceWrapper>\n          <Time>{date.format(\"YYYY-MM-DD HH:mm\")}</Time>\n        </MessageWrapper>\n        <TickWrapper>\n          <TickWrapperInner>\n            <Tick src={tick} />\n          </TickWrapperInner>\n        </TickWrapper>\n        <ActionGroup>\n          <AutoLeave>\n            <CheckBoxWrapper>\n              <CheckBox checked={autoLeave} onChange={setAutoLeave} />\n              {autoLeaveHour}小時後自動離開\n            </CheckBoxWrapper>\n            <Change\n              onClick={() => {\n                setIsAutoLeaveModalOpen(true);\n              }}\n            >\n              變更\n            </Change>\n          </AutoLeave>\n          <ConfirmButton\n            shadowed\n            onClick={() => {\n              setIsLeaveModalOpen(true);\n            }}\n          >\n            離開\n          </ConfirmButton>\n          <LeaveMessage>當你離開時請緊記按\"離開\"</LeaveMessage>\n        </ActionGroup>\n      </PageWrapper>\n      <AutoLeaveModal\n        isModalOpen={isAutoLeaveModalOpen}\n        onCancel={() => {\n          setIsAutoLeaveModalOpen(false);\n        }}\n        onConfirm={handleSetAutoLeaveHour}\n        selectedAutoLeaveHour={autoLeaveHour}\n        date={date}\n      />\n      <LeaveModal\n        isModalOpen={isLeaveModalOpen}\n        onCancel={() => {\n          setIsLeaveModalOpen(false);\n        }}\n        onLeaveNow={handleLeavePage}\n        onLeaved={handleLeaved}\n        place={place || \"\"}\n        date={date}\n        autoLeaveHour={autoLeave ? autoLeaveHour : 0}\n      />\n      <TimePickModal\n        isModalOpen={isTimePickModalOpen}\n        onCancel={() => {\n          setIsTimePickModalOpen(false);\n        }}\n        onConfirm={handleLeavePage}\n      />\n    </>\n  );\n};\n\nconst PageWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n  display: flex;\n  flex-direction: column;\n  color: #fff;\n`;\n\nconst Header = styled.div`\n  width: 100%;\n  display: flex;\n  justify-content: flex-end;\n  flex-shrink: 0;\n`;\n\nconst Cross = styled.img`\n  height: 20px;\n  margin: 24px;\n`;\n\nconst PlaceWrapper = styled.div`\n  padding: 0 32px;\n`;\n\nconst MessageWrapper = styled.div`\n  width: 100%;\n  height: 50%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n\nconst TickWrapper = styled.div`\n  height: 100%;\n  width: 100%;\n  text-align: center;\n`;\n\nconst TickWrapperInner = styled.div`\n  height: 100%;\n  max-height: 200px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n\nconst Tick = styled.img`\n  display: inline-block;\n  height: 100%;\n  max-height: 110px;\n`;\n\nconst Msg = styled.div`\n  color: #ffffff;\n  text-align: center;\n  font-size: 15px;\n`;\n\nconst Time = styled.div`\n  color: #ffffff;\n  text-align: center;\n`;\n\nconst AutoLeave = styled.div`\n  margin-bottom: 16px;\n  width: 100%;\n  max-width: 380px;\n  margin: 16px auto;\n  display: flex;\n  flex-shrink: 0;\n  font-size: 14px;\n`;\n\nconst CheckBoxWrapper = styled.div`\n  width: 100%;\n  text-align: left;\n  padding-left: 24px;\n  line-height: 32px;\n`;\n\nconst Change = styled.div`\n  flex-shrink: 0;\n  padding-right: 24px;\n  line-height: 32px;\n`;\n\nconst LeaveMessage = styled.div`\n  text-align: center;\n  padding-bottom: 40px;\n  flex-shrink: 0;\n`;\n\nconst ActionGroup = styled.div`\n  width: 100%;\n  flex-shrink: 0;\n`;\n","import { isEmpty, trim } from \"ramda\";\nimport { sha256 } from \"js-sha256\";\n\ntype DecodedJSON = {\n  hash: string;\n  metadata: { typeEn: string; typeZh: string };\n  nameEn: string;\n  nameZh: string;\n  type: string;\n};\n\nexport type EncodeParam = {\n  typeEn: string;\n  typeZh: string;\n  nameEn: string;\n  nameZh: string;\n  type: string;\n  venueCode: string;\n  venueID: string;\n};\n\nexport type EnhancedEncodeParam = EncodeParam & {\n  addressEn: string;\n  addressZh: string;\n  customImg: string | null;\n};\n\n// https://github.com/aaasssdddwww/back-home-safe/pull/7\nexport const qrDecode = (input: string): DecodedJSON | null => {\n  if (!input.startsWith(\"HKEN:\")) return null;\n  const venueId = input.substring(6, 14);\n  const computedHash = getHash(venueId);\n\n  const base64Data = input.substring(14);\n  const json: DecodedJSON = JSON.parse(\n    decodeURIComponent(escape(window.atob(base64Data)))\n  );\n\n  console.log({\n    input,\n    venueId,\n    decodedData: json,\n    computedHash,\n    hashMatch: computedHash === json.hash,\n  });\n\n  return json;\n};\n\nexport const getVenueName = (input: string) => {\n  if (!input.startsWith(\"HKEN:\")) return \"\";\n  const decodedJson = qrDecode(input);\n  if (!decodedJson) return \"\";\n\n  const trimmedZhName = decodedJson.nameZh ? trim(decodedJson.nameZh) : \"\";\n  const name = !isEmpty(trimmedZhName) ? trimmedZhName : decodedJson.nameEn;\n\n  return name;\n};\n\n// http://blog.headuck.com/2020/11/19/%e3%80%8c%e5%ae%89%e5%bf%83%e5%87%ba%e8%a1%8c%e3%80%8d%e8%83%bd%e5%90%a6%e5%ae%89%e5%bf%83%e4%bd%bf%e7%94%a8%ef%bc%9f%ef%bc%88%e4%ba%8c%ef%bc%89/?__cf_chl_captcha_tk__=872d5919c48d1b25116c910c9de6c92e2b27facf-1613591353-0-AcPHoKV7LGMua5u8nTgTCYJXS9ZaCBaNSavb3A1E6F6HLsITHuJ9oA-SH4uu4UqnYiphktotJfPYaSUxQSmcfTk6y8iVJb873VgLU0qrdjxU6pZjBx5UxwqLDXom03026Z7EFmoHq70-CVMFVFPdTLHLXkIEYDFHZeqU0RE5KUjOwoJpOIFRLfsXwtRYGefQtspNIySZCg6u5sSDpxdRNc5dpOfdN2dybpb0G5T7j2URLhglnm7gH_chBuLNtSg-awOlrCk7Ljktwxte6lQj6AoNG2Cbqry8_-VvWdPX_1BdDfQ3apJvfUewJ6AIqHfDclXLrRril2vcMckHgrgvATQa4rcOr6AwzaZBcf90sfp3bnNQw59oszIkaV3Dzb8TrJlm4jWq42q3ijXTUua1WKWPDBzDBNl1SjLtar-AI3kzrgwFgaXkWkAxakLyTBJ7wszVHo0DHdCtE_Ozma4VkIZWZSF_gZ3dgBeAbBdwW8XTPsliqfplIeHsML8uJ2dAlxxPIcDDJ7a0gYr2YK4Jdl1ot568DfdMOuzhoMzy2OJKT9YFITl4k0Zger3M5kjSUPjgAOjB4j4p2M6kla2DERXhQj0IRi-sXG92OWEX5-Joa4x41eMqH6X6La4CaSfamwyN3gSwFtBfxvPA2V-Hss3Vj4zEgGs75oxSS7ZrUwbwOORal3VPYiWHzaif0qbWw93UBfuMgfsAyJnvAa5TntFPz3PZqpY9rg6gExJSaKFGBKAnOxyitUe1BDt0rW76u_qay7xF1WlCGCtIasM82E5nF1X51J_sXcAMwmZyG29b\nexport const getHash = (venueId: string) => {\n  const string = `HKEN${venueId}2020`;\n  return sha256(string);\n};\n\nexport const qrEncode = ({\n  typeEn,\n  typeZh,\n  nameEn,\n  nameZh,\n  type,\n  venueCode,\n  venueID,\n}: EncodeParam) => {\n  const json = {\n    metadata: !isEmpty(typeEn) || !isEmpty(typeZh) ? { typeEn, typeZh } : null,\n    nameZh,\n    nameEn,\n    type,\n    hash: getHash(venueID),\n  };\n\n  const base64Data = window.btoa(\n    unescape(encodeURIComponent(JSON.stringify(json)))\n  );\n\n  return `HKEN:${venueCode}${venueID}${base64Data}`;\n};\n","export default __webpack_public_path__ + \"static/media/qrOverlay.185cc3ea.svg\";","import { isIOS } from \"react-device-detect\";\n\nexport const getMediaStream = async (cameraId?: string) => {\n  if (\"mediaDevices\" in navigator) {\n    try {\n      // WebRTC adapter will polyfill this\n      return navigator.mediaDevices.getUserMedia({\n        video: cameraId\n          ? { deviceId: cameraId }\n          : { facingMode: \"environment\" },\n        audio: false,\n      });\n    } catch (e) {\n      alert(\"未能開啟相機鏡頭，請到相機設定進行設置\");\n      console.log(e);\n      return null;\n    }\n  } else {\n    alert(\n      isIOS\n        ? \"getUserMedia is not implemented in this browser, 請確保裝置在IOS 14或以上\"\n        : \"getUserMedia is not implemented in this browser\"\n    );\n    return null;\n  }\n};\n","import React, { useCallback, useEffect, useRef } from \"react\";\nimport styled from \"styled-components\";\nimport { useRafLoop } from \"react-use\";\nimport { getMediaStream } from \"../utils/mediaStream\";\nimport { useCamera } from \"../hooks/useCamera\";\n\ntype Props = {\n  onFrame?: (imageData: ImageData) => void;\n};\n\nexport const MediaStream = ({ onFrame }: Props) => {\n  const { cameraId } = useCamera();\n\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  const [loopStop, loopStart] = useRafLoop(() => {\n    const canvasElement = canvasRef.current;\n    const videoElement = videoRef.current;\n\n    if (\n      canvasElement &&\n      videoElement &&\n      videoElement.readyState === videoElement.HAVE_ENOUGH_DATA\n    ) {\n      const canvas = canvasElement.getContext(\"2d\");\n      if (!canvas) return;\n\n      canvasElement.height = videoElement.videoHeight;\n      canvasElement.width = videoElement.videoWidth;\n      canvas.drawImage(\n        videoElement,\n        0,\n        0,\n        canvasElement.width,\n        canvasElement.height\n      );\n\n      const imageData = canvas.getImageData(\n        0,\n        0,\n        canvasElement.width,\n        canvasElement.height\n      );\n\n      onFrame && onFrame(imageData);\n    }\n  }, false);\n\n  const initMediaStream = useCallback(async () => {\n    const videoElement = videoRef.current;\n    if (!videoElement) return;\n\n    console.log(\"cameraId\", cameraId);\n\n    const stream = await getMediaStream(\n      cameraId === \"AUTO\" ? undefined : cameraId\n    );\n    if (!stream) return;\n\n    videoElement.srcObject = stream;\n    videoElement.play();\n    loopStart();\n  }, [loopStart, cameraId]);\n\n  useEffect(() => {\n    const videoElement = videoRef.current;\n    initMediaStream();\n\n    return () => {\n      loopStop();\n      if (videoElement) {\n        const stream = videoElement.srcObject as MediaStream | null;\n        if (!stream) return;\n        const tracks = stream.getTracks();\n\n        tracks.forEach((track) => {\n          track.stop();\n        });\n\n        videoElement.srcObject = null;\n      }\n    };\n  }, [loopStart, loopStop, videoRef, initMediaStream, cameraId]);\n\n  return (\n    <>\n      <Video ref={videoRef} playsInline />\n      <Canvas ref={canvasRef} />\n    </>\n  );\n};\n\nconst Video = styled.video`\n  /* Make video to at least 100% wide and tall */\n  min-width: 100%;\n  min-height: 100%;\n\n  /* Setting width & height to auto prevents the browser from stretching or squishing the video */\n  width: auto;\n  height: auto;\n\n  /* Center the video */\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n`;\n\nconst Canvas = styled.canvas`\n  display: none;\n`;\n","import jsQR, { QRCode } from \"jsqr\";\nimport { useCallback } from \"react\";\n\nimport { MediaStream } from \"./MediaStream\";\n\ntype Props = {\n  onDecode: (code: QRCode) => void;\n};\n\nexport const QRCodeReader = ({ onDecode }: Props) => {\n  const handleFrame = useCallback(\n    (imageData: ImageData) => {\n      const code = jsQR(imageData.data, imageData.width, imageData.height, {\n        inversionAttempts: \"dontInvert\",\n      });\n      code && onDecode(code);\n    },\n    [onDecode]\n  );\n\n  return <MediaStream onFrame={handleFrame} />;\n};\n","export default __webpack_public_path__ + \"static/media/back.7bf7a56f.svg\";","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport back from \"../assets/back.svg\";\n\ntype Props = {\n  name: string;\n  backPath: string;\n};\n\nexport const Header = ({ name, backPath }: Props) => {\n  return (\n    <Wrapper>\n      <Link to={backPath}>\n        <BackButton src={back} />\n      </Link>\n      {name}\n    </Wrapper>\n  );\n};\n\nconst BackButton = styled.img`\n  height: 20px;\n  top: 14px;\n  left: 16px;\n  position: absolute;\n`;\n\nconst Wrapper = styled.div`\n  color: #ffffff;\n  background-color: #12b188;\n  text-align: center;\n  line-height: 48px;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n  flex-shrink: 0;\n`;\n","import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { getVenueName } from \"../../utils/qr\";\nimport qrOverlay from \"../../assets/qrOverlay.svg\";\nimport { QRCodeReader } from \"../../components/QRCodeReader\";\nimport { QRCode } from \"jsqr\";\nimport { isEmpty } from \"ramda\";\nimport { Header } from \"../../components/Header\";\n\nexport const QRReader = () => {\n  const browserHistory = useHistory();\n\n  const handleScan = ({ data }: QRCode) => {\n    if (!data || isEmpty(data)) return;\n    const place = getVenueName(data);\n    if (isEmpty(place)) return;\n    browserHistory.push({ pathname: \"/confirm\", search: `?place=${place}` });\n  };\n\n  return (\n    <PageWrapper>\n      <Header backPath=\"/\" name=\"掃瞄二維碼\" />\n      <Message>掃瞄二維碼</Message>\n      <VideoContainer>\n        <Overlay />\n        <QRCodeReader onDecode={handleScan} />\n      </VideoContainer>\n    </PageWrapper>\n  );\n};\n\nconst PageWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n  display: flex;\n  flex-direction: column;\n`;\n\nconst VideoContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  position: relative;\n`;\n\nconst Overlay = styled.div`\n  /* The image used */\n  background-image: url(\"${qrOverlay}\");\n\n  /* Full height */\n  height: 100%;\n\n  /* Center and scale the image nicely */\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n\n  z-index: 50;\n  position: relative;\n`;\n\nconst Message = styled.div`\n  position: absolute;\n  z-index: 51;\n  bottom: 20%;\n  width: 100%;\n  text-align: center;\n  color: #ffffff;\n  font-size: 16px;\n`;\n","export default __webpack_public_path__ + \"static/media/plus.abd4712a.svg\";","import { Button } from \"@material-ui/core\";\nimport React, { useCallback } from \"react\";\nimport styled from \"styled-components\";\nimport plus from \"../../src/assets/plus.svg\";\nimport { useInstallPrompt } from \"../hooks/useInstallPrompt\";\n\ntype Props = {\n  onDismiss: () => void;\n};\n\nexport const PWAPrompt = ({ onDismiss }: Props) => {\n  const [prompt, promptToInstall] = useInstallPrompt();\n\n  const onInstall = useCallback(() => {\n    if (!prompt) return;\n    promptToInstall();\n  }, [prompt, promptToInstall]);\n\n  return (\n    <Wrapper>\n      <AddIcon src={plus} />\n      <div>新增至主畫面先啦</div>\n      <div>唔係點似個App</div>\n      <InstructionWrapper>\n        <div>IOS</div>\n        <div>{\"用Safari開=>分享=>新增至主畫面\"}</div>\n        <div>Android</div>\n        <div>{\"用Chrome開=>右上選項=>新增至主畫面/安裝應用程式\"}</div>\n        {prompt && (\n          <InstallButtonWrapper>\n            <Button variant=\"contained\" onClick={onInstall}>\n              安裝\n            </Button>\n          </InstallButtonWrapper>\n        )}\n      </InstructionWrapper>\n      <div>\n        <Button variant=\"contained\" onClick={onDismiss}>\n          我知我做緊乜，俾我入去\n        </Button>\n      </div>\n    </Wrapper>\n  );\n};\n\nconst Wrapper = styled.div`\n  display: flex;\n  width: 100%;\n  height: 100%;\n  justify-content: center;\n  vertical-align: middle;\n  flex-direction: column;\n  text-align: center;\n  color: #fff;\n`;\n\nconst AddIcon = styled.img`\n  width: 100px;\n  margin: 0 auto 32px auto;\n`;\n\nconst InstallButtonWrapper = styled.div`\n  margin-top: 12px;\n`;\n\nconst InstructionWrapper = styled.div`\n  font-size: 12px;\n  margin: 24px 0;\n`;\n","import { useEffect, useState } from \"react\";\n\ninterface IBeforeInstallPromptEvent extends Event {\n  readonly platforms: string[];\n  readonly userChoice: Promise<{\n    outcome: \"accepted\" | \"dismissed\";\n    platform: string;\n  }>;\n  prompt(): Promise<void>;\n}\n\nexport const useInstallPrompt = (): [\n  IBeforeInstallPromptEvent | null,\n  () => void\n] => {\n  const [prompt, setState] = useState<IBeforeInstallPromptEvent | null>(null);\n\n  const promptToInstall = () => {\n    if (prompt) {\n      return prompt.prompt();\n    }\n    return Promise.reject(\n      new Error(\n        'Tried installing before browser sent \"beforeinstallprompt\" event'\n      )\n    );\n  };\n\n  useEffect(() => {\n    const handleBeforeInstallPrompt = (e: IBeforeInstallPromptEvent) => {\n      e.preventDefault();\n      setState(e);\n    };\n\n    const handleAppInstalled = (e: Event) => {\n      e.preventDefault();\n      console.log(\"app installed\");\n      setState(null);\n    };\n\n    window.addEventListener(\n      \"beforeinstallprompt\",\n      handleBeforeInstallPrompt as any\n    );\n\n    window.addEventListener(\"appinstalled\", handleAppInstalled);\n\n    return () => {\n      window.removeEventListener(\n        \"beforeinstallprompt\",\n        handleBeforeInstallPrompt as any\n      );\n\n      window.removeEventListener(\"appinstalled\", handleAppInstalled);\n    };\n  }, []);\n\n  return [prompt, promptToInstall];\n};\n","export default __webpack_public_path__ + \"static/media/baseIcon.aa0e0793.png\";","import { isEmpty } from \"ramda\";\nimport React, { useEffect, useRef } from \"react\";\nimport { Place } from \"../../components/Place\";\nimport cross from \"../../assets/cross.svg\";\n\nimport { EnhancedEncodeParam, qrEncode } from \"../../utils/qr\";\nimport styled from \"styled-components\";\nimport QrCodeWithLogo from \"qrcode-with-logos\";\nimport baseIcon from \"../../assets/baseIcon.png\";\n\ntype Props = {\n  data: EnhancedEncodeParam;\n  onLeave: () => void;\n};\n\nexport const QRPreview = ({ data, onLeave }: Props) => {\n  const imgRef = useRef<HTMLImageElement>(null);\n\n  useEffect(() => {\n    if (!imgRef.current) return;\n\n    const encodedString = qrEncode(data);\n\n    new QrCodeWithLogo({\n      image: imgRef.current,\n      content: encodedString,\n      width: 380,\n      logo: {\n        src: data.customImg || baseIcon,\n        logoRadius: 8,\n        borderSize: 0,\n      },\n    }).toImage();\n  }, [data]);\n\n  return data ? (\n    <PageWrapper>\n      <Header>\n        <Cross src={cross} onClick={onLeave} />\n      </Header>\n      <MessageWrapper>\n        <PlaceWrapper>\n          {data.nameEn && !isEmpty(data.nameZh) && (\n            <StyledPlace value={data.nameZh || \"\"} readOnly />\n          )}\n          {data.nameEn && !isEmpty(data.nameEn) && (\n            <StyledPlace value={data.nameEn || \"\"} readOnly />\n          )}\n        </PlaceWrapper>\n      </MessageWrapper>\n      <TickWrapper>\n        <TickWrapperInner>\n          <StyledQrCode ref={imgRef} alt=\"qrCode\" />\n        </TickWrapperInner>\n      </TickWrapper>\n      <Address>\n        {data.addressZh && !isEmpty(data.addressZh) && (\n          <div>{data.addressZh}</div>\n        )}\n        {data.addressEn && !isEmpty(data.addressEn) && (\n          <div>{data.addressEn}</div>\n        )}\n      </Address>\n    </PageWrapper>\n  ) : (\n    <></>\n  );\n};\n\nconst PageWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  color: #fff;\n  background-color: #12b188;\n  position: absolute;\n`;\n\nconst Header = styled.div`\n  width: 100%;\n  display: flex;\n  justify-content: flex-end;\n  flex-shrink: 0;\n`;\n\nconst Cross = styled.img`\n  height: 20px;\n  margin: 24px;\n`;\n\nconst StyledPlace = styled(Place)`\n  font-size: 20px;\n  line-height: 20px;\n  text-shadow: none;\n`;\n\nconst PlaceWrapper = styled.div`\n  padding: 0 32px;\n`;\n\nconst MessageWrapper = styled.div`\n  width: 100%;\n  height: 50%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n\nconst TickWrapper = styled.div`\n  height: 100%;\n  width: 100%;\n  text-align: center;\n`;\n\nconst TickWrapperInner = styled.div`\n  height: 100%;\n  max-height: 280px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n\nconst StyledQrCode = styled.img`\n  display: inline-block;\n  height: 100%;\n  max-height: 300px;\n  margin: 0 auto;\n`;\n\nconst Address = styled.div`\n  width: 100%;\n  height: 50%;\n  text-align: center;\n`;\n","import {\n  Button,\n  ButtonGroup,\n  Divider,\n  FormGroup,\n  TextField,\n} from \"@material-ui/core\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { useSetState, useMount } from \"react-use\";\nimport styled from \"styled-components\";\nimport { Header } from \"../../components/Header\";\nimport { EnhancedEncodeParam, qrEncode } from \"../../utils/qr\";\nimport QrCodeWithLogo from \"qrcode-with-logos\";\nimport baseIcon from \"../../assets/baseIcon.png\";\nimport { head } from \"ramda\";\nimport { disableBodyScroll } from \"body-scroll-lock\";\nimport SaveIcon from \"@material-ui/icons/Save\";\nimport { QRPreview } from \"./QRPreview\";\n\nexport const QRGenerator = () => {\n  const imgRef = useRef<HTMLImageElement>(null);\n  const fileFieldRef = React.useRef<HTMLInputElement>(null);\n\n  const [showPreview, setShowPreview] = useState(false);\n  const [qrCode, setQrCode] = useState<QrCodeWithLogo | null>(null);\n  const [state, setState] = useSetState<EnhancedEncodeParam>({\n    typeEn: \"Stores/Shopping Malls\",\n    typeZh: \"商店/商場\",\n    nameEn: \"CityWalk\",\n    nameZh: \"荃新天地\",\n    type: \"IMPORT\",\n    venueCode: \"0\",\n    venueID: \"WHBvLDSa\",\n    addressEn: \"1 & 18 Yeung Uk Rd, Tsuen Wan, Hong Kong\",\n    addressZh: \"荃灣楊屋道1號\",\n    customImg: null,\n  });\n\n  const isVenueCodeValid = state.venueCode.length === 1;\n  const isVenueIdValid = state.venueID.length === 8;\n\n  const isValidData = isVenueCodeValid && isVenueIdValid;\n\n  useMount(() => {\n    const root = document.querySelector(\"#scroll\");\n    if (!root) return;\n    disableBodyScroll(root);\n  });\n\n  useEffect(() => {\n    if (!imgRef.current || !isValidData) return;\n    const encodedString = qrEncode(state);\n\n    const qrCode = new QrCodeWithLogo({\n      image: imgRef.current,\n      content: encodedString,\n      width: 380,\n      logo: {\n        src: state.customImg || baseIcon,\n        logoRadius: 8,\n        borderSize: 0,\n      },\n    });\n\n    qrCode.toImage();\n    setQrCode(qrCode);\n  }, [state, isValidData]);\n\n  const handleFileSelected = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(e.target.files || []);\n    const img = head(files);\n    if (!img) {\n      setState({ customImg: null });\n    } else {\n      const reader = new FileReader();\n      reader.readAsDataURL(img);\n      reader.onload = () => setState({ customImg: String(reader.result) });\n    }\n  };\n\n  const handleDownload = () => {\n    if (!qrCode) return;\n    qrCode.downloadImage(\"QR Code\");\n  };\n\n  return (\n    <PageWrapper>\n      <Header backPath=\"/\" name=\"生成二維碼\" />\n      <ContentWrapper id=\"scroll\">\n        <StyledForm>\n          <StyledTextField\n            label=\"場所種類(中文) (typeZh)\"\n            value={state.typeZh}\n            onChange={(e) => {\n              setState({ typeZh: e.target.value });\n            }}\n          />\n          <StyledTextField\n            label=\"場所種類(英文) (typeEn)\"\n            value={state.typeEn}\n            onChange={(e) => {\n              setState({ typeEn: e.target.value });\n            }}\n          />\n          <StyledTextField\n            label=\"場所名字(中文) (nameZh)\"\n            value={state.nameZh}\n            onChange={(e) => {\n              setState({ nameZh: e.target.value });\n            }}\n          />\n          <StyledTextField\n            label=\"場所名字(英文) (nameEn)\"\n            value={state.nameEn}\n            onChange={(e) => {\n              setState({ nameEn: e.target.value });\n            }}\n          />\n          <StyledTextField\n            label=\"場所地址(中文) (預覽用)\"\n            value={state.addressZh}\n            onChange={(e) => {\n              setState({ addressZh: e.target.value });\n            }}\n          />\n          <StyledTextField\n            label=\"場所地址(英文) (預覽用)\"\n            value={state.addressEn}\n            onChange={(e) => {\n              setState({ addressEn: e.target.value });\n            }}\n          />\n          <StyledTextField\n            label=\"類型\"\n            value={state.type}\n            onChange={(e) => {\n              setState({ type: e.target.value });\n            }}\n          />\n          <StyledTextField\n            label=\"場地編碼 (唔知唔好搞)\"\n            value={state.venueCode}\n            onChange={(e) => {\n              setState({ venueCode: e.target.value });\n            }}\n            error={!isVenueCodeValid}\n            inputProps={{\n              maxLength: 1,\n            }}\n          />\n          <StyledTextField\n            label=\"場地ID (唔知唔好搞)\"\n            value={state.venueID}\n            onChange={(e) => {\n              setState({ venueID: e.target.value });\n            }}\n            error={!isVenueIdValid}\n            inputProps={{\n              maxLength: 8,\n            }}\n          />\n          <StyledInputWrapper>\n            <div>自定Icon</div>\n            <StyledFileInput\n              type=\"file\"\n              name=\"avatar\"\n              accept=\"image/png, image/jpeg\"\n              ref={fileFieldRef}\n              onChange={handleFileSelected}\n            />\n          </StyledInputWrapper>\n        </StyledForm>\n        <Divider />\n        <Actions>\n          <ButtonGroup aria-label=\"outlined primary button group\">\n            <Button\n              variant=\"contained\"\n              size=\"small\"\n              startIcon={<SaveIcon />}\n              onClick={handleDownload}\n              disabled={!isValidData}\n            >\n              儲存\n            </Button>\n            <Button\n              variant=\"contained\"\n              size=\"small\"\n              startIcon={<SaveIcon />}\n              onClick={() => {\n                setShowPreview(true);\n              }}\n              disabled={!isValidData}\n            >\n              預覽\n            </Button>\n          </ButtonGroup>\n        </Actions>\n        <StyledQrCode ref={imgRef} alt=\"qrCode\" />\n      </ContentWrapper>\n      {showPreview && (\n        <QRPreview\n          data={state}\n          onLeave={() => {\n            setShowPreview(false);\n          }}\n        />\n      )}\n    </PageWrapper>\n  );\n};\n\nconst PageWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  background-color: #fff;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst ContentWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n`;\n\nconst StyledForm = styled(FormGroup)`\n  padding: 8px 16px;\n`;\n\nconst StyledTextField = styled(TextField)`\n  &.MuiFormControl-root {\n    margin-top: 8px;\n  }\n`;\n\nconst StyledInputWrapper = styled.div`\n  font-size: 12px;\n  padding: 4px 0;\n  color: rgba(0, 0, 0, 0.54);\n`;\n\nconst StyledFileInput = styled.input`\n  padding: 4px 0;\n`;\n\nconst StyledQrCode = styled.img`\n  width: 100%;\n`;\n\nconst Actions = styled.div`\n  margin-top: 16px;\n  display: flex;\n  justify-content: center;\n`;\n","import React from \"react\";\nimport { AnimatedSwitch as Switch, spring } from \"react-router-transition\";\nimport styled from \"styled-components\";\n\nconst glide = (val: number) =>\n  spring(val, {\n    stiffness: 174,\n    damping: 24,\n  });\n\ntype Props = {\n  children: React.ReactNode;\n};\n\nexport const AnimatedSwitch = (props: Props) => {\n  return (\n    <StyledSwitch\n      {...props}\n      atEnter={{ opacity: 1, offset: 100, zIndex: 100 }}\n      atLeave={{\n        opacity: 0,\n        offset: 0,\n      }}\n      atActive={{ opacity: 1, offset: glide(0) }}\n      mapStyles={(styles) => ({\n        opacity: styles.opacity,\n        zIndex: styles.zIndex,\n        transform: `translateX(${styles.offset}%)`,\n      })}\n    />\n  );\n};\n\nconst StyledSwitch = styled(Switch)`\n  position: relative;\n  width: 100%;\n  height: 100%;\n\n  & > div {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background-color: #12b188;\n    box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n  }\n`;\n","import { FormControl, InputLabel, MenuItem, Select } from \"@material-ui/core\";\nimport { isEmpty, isNil } from \"ramda\";\nimport styled from \"styled-components\";\nimport { Header } from \"../../components/Header\";\nimport { MediaStream } from \"../../components/MediaStream\";\nimport { useCamera } from \"../../hooks/useCamera\";\n\nexport const CameraSetting = () => {\n  const { cameraId, setCameraId, cameraList } = useCamera();\n\n  return (\n    <PageWrapper>\n      <Header backPath=\"/\" name=\"相機設定\" />\n      <FormWrapper>\n        <StyledFormControl>\n          <InputLabel id=\"cameraId\">相機選擇</InputLabel>\n          <Select\n            labelId=\"cameraId\"\n            id=\"demo-simple-select\"\n            value={cameraId}\n            onChange={(e) => {\n              setCameraId((e.target.value as string) || \"AUTO\");\n            }}\n          >\n            <MenuItem value=\"AUTO\">自動</MenuItem>\n            {cameraList.map(({ deviceId, label }) => (\n              <MenuItem value={deviceId} key=\"deviceId\">\n                {isNil(label) || isEmpty(label) ? deviceId : label}\n              </MenuItem>\n            ))}\n          </Select>\n        </StyledFormControl>\n      </FormWrapper>\n      <VideoContainer>\n        <MediaStream />\n      </VideoContainer>\n    </PageWrapper>\n  );\n};\n\nconst PageWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n  display: flex;\n  flex-direction: column;\n  background-color: #fff;\n`;\n\nconst VideoContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  position: relative;\n`;\n\nconst FormWrapper = styled.div`\n  width: 100%;\n  display: flex;\n`;\n\nconst StyledFormControl = styled(FormControl)`\n  width: 100%;\n\n  &.MuiFormControl-root {\n    margin: 8px;\n  }\n`;\n","import React, { useState, useEffect } from \"react\";\nimport { createGlobalStyle } from \"styled-components\";\n\nimport { Route, HashRouter, Redirect } from \"react-router-dom\";\nimport { Welcome } from \"./containers/Welcome\";\nimport { Confirm } from \"./containers/Confirm\";\nimport { QRReader } from \"./containers/QRReader\";\nimport { PWAPrompt } from \"./components/PWAPrompt\";\nimport { disableBodyScroll } from \"body-scroll-lock\";\nimport adapter from \"webrtc-adapter\";\nimport { QRGenerator } from \"./containers/QRGeneartor\";\nimport { checkPwaInstalled } from \"./utils/appCheck\";\nimport { AnimatedSwitch } from \"./components/AnimatedSwitch\";\nimport { CameraSetting } from \"./containers/CameraSetting\";\nimport { useCamera } from \"./hooks/useCamera\";\n\nfunction App() {\n  const { hasCameraSupport } = useCamera();\n  const [showPWAPrompt, setShowPWAPrompt] = useState(!checkPwaInstalled());\n\n  useEffect(() => {\n    console.log(adapter.browserDetails.browser, adapter.browserDetails.version);\n  }, []);\n\n  useEffect(() => {\n    const root = document.querySelector(\"#root\");\n    if (!root) return;\n    disableBodyScroll(root);\n  }, []);\n\n  return (\n    <>\n      <GlobalStyle />\n      {showPWAPrompt ? (\n        <PWAPrompt\n          onDismiss={() => {\n            setShowPWAPrompt(false);\n          }}\n        />\n      ) : (\n        <HashRouter basename=\"/\">\n          <AnimatedSwitch>\n            <Route exact path=\"/\">\n              <Welcome />\n            </Route>\n            <Route exact path=\"/qrGenerator\">\n              <QRGenerator />\n            </Route>\n            <Route exact path=\"/confirm\">\n              <Confirm />\n            </Route>\n            {hasCameraSupport && (\n              <Route exact path=\"/qrReader\">\n                <QRReader />\n              </Route>\n            )}\n            {hasCameraSupport && (\n              <Route exact path=\"/cameraSetting\">\n                <CameraSetting />\n              </Route>\n            )}\n            <Redirect to=\"/\" />\n          </AnimatedSwitch>\n        </HashRouter>\n      )}\n    </>\n  );\n}\n\nexport default App;\n\nconst GlobalStyle = createGlobalStyle`\nhtml {\n  width: 100%;\n  height: 100%;\n}\n\nbody {\n  margin: 0;\n  font-family: Rubik, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  background-color:#12b188;\n  width: 100%;\n  height: 100%;\n}\n\ntextarea {\n  font-family: inherit;\n}\n\n\n#root {\n  width: 100%;\n  height: 100%;\n}\n\na {\n  text-decoration: none;\n}\n`;\n","export const checkPwaInstalled = () => {\n  const isInstalled =\n    window.matchMedia(\"(display-mode: standalone)\").matches ||\n    /\\bmode=standalone\\b/.test(window.location.hash) ||\n    window.location.hostname === \"localhost\";\n\n  return isInstalled;\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://cra.link/PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://cra.link/PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport { UseCameraProvider } from \"./hooks/useCamera\";\nimport * as serviceWorkerRegistration from \"./serviceWorkerRegistration\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <UseCameraProvider>\n      <App />\n    </UseCameraProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.register();\n"],"sourceRoot":""}