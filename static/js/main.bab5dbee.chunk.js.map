{"version":3,"sources":["components/AnimatedSwitch.tsx","assets/back.svg","components/Header.tsx","utils/mediaStream.ts","hooks/useCamera.ts","components/MediaStream.tsx","containers/CameraSetting/index.tsx","assets/cross.svg","assets/tick.svg","components/Button.tsx","components/Place.tsx","assets/crossBlack.svg","assets/greenTick.svg","containers/Confirm/AutoLeaveModal.tsx","containers/Confirm/LeaveModal.tsx","components/DatePicker.tsx","containers/Confirm/TimePickModal.tsx","assets/checkbox.svg","assets/checkboxChecked.svg","components/CheckBox.tsx","assets/icon.png","containers/Confirm/index.tsx","utils/qr.ts","assets/baseIcon.png","containers/QRGeneartor/QRPreview.tsx","containers/QRGeneartor/index.tsx","assets/qrOverlay.svg","components/QRCodeReader.tsx","containers/QRReader/index.tsx","assets/bg.png","assets/bar.png","containers/Welcome/index.tsx","App.tsx","utils/appCheck.ts","serviceWorkerRegistration.ts","index.tsx"],"names":["AnimatedSwitch","props","StyledSwitch","atEnter","opacity","offset","zIndex","atLeave","atActive","val","spring","stiffness","damping","mapStyles","styles","transform","styled","Switch","Header","name","backPath","Wrapper","to","BackButton","src","back","img","div","getMediaStream","cameraId","a","navigator","mediaDevices","getUserMedia","video","deviceId","facingMode","audio","alert","console","log","isIOS","constate","useState","hasCameraSupport","useLocalStorage","setCameraId","cameraList","setCameraList","initCameraList","useCallback","hasIn","enumerateDevices","deviceList","filter","device","kind","useEffect","any","UseCameraProvider","useCamera","MediaStream","onFrame","videoRef","useRef","canvasRef","useRafLoop","canvasElement","current","videoElement","readyState","HAVE_ENOUGH_DATA","canvas","getContext","height","videoHeight","width","videoWidth","drawImage","imageData","getImageData","loopStop","loopStart","initMediaStream","undefined","stream","srcObject","play","getTracks","forEach","track","stop","Video","ref","playsInline","Canvas","CameraSetting","PageWrapper","FormWrapper","StyledFormControl","InputLabel","id","Select","labelId","value","onChange","e","target","MenuItem","map","label","isNil","isEmpty","VideoContainer","FormControl","ConfirmButton","button","disabled","shadowed","ModalConfirmButton","Place","placeholder","readOnly","rest","StyledInput","async","TextareaAutosize","AutoLeaveModal","isModalOpen","onCancel","onConfirm","selectedAutoLeaveHour","date","autoLeaveHourTmp","setAutoLeaveHourTmp","toDate","useMemo","add","isOpen","onRequestClose","style","overlay","backgroundColor","content","outline","border","padding","borderRadius","position","top","left","overflow","ariaHideApp","onAfterOpen","root","document","querySelector","disableBodyScroll","CrossWrapper","Cross","crossBlack","onClick","Title","HourListWrapper","HourList","hour","HourListItem","SelectedTick","greenTick","TimeWrapper","format","h1","ul","li","LeaveModal","onLeaveNow","onLeaved","place","autoLeaveHour","shouldDisplayAutoLeave","Msg","Time","AutoLeave","GreenButton","DatePicker","forwardRef","useImperativeHandle","init","ele","Picker","inline","rows","className","TimePickModal","datePickerRef","TimePickerWrapper","CheckBox","checked","handleClick","isAndroid","StyledCheckbox","color","IOSCheckBox","checkboxChecked","checkbox","Checkbox","Confirm","browserHistory","useHistory","browserLocation","useLocation","autoLeave","setAutoLeave","setAutoLeaveHour","isAutoLeaveModalOpen","setIsAutoLeaveModalOpen","isLeaveModalOpen","setIsLeaveModalOpen","isTimePickModalOpen","setIsTimePickModalOpen","trim","URLSearchParams","search","get","dayjs","handleLeavePage","push","window","innerWidth","icon","cross","MessageWrapper","PlaceWrapper","TickWrapper","TickWrapperInner","Tick","tick","flex","ActionGroup","LeaveMessage","CheckBoxWrapper","Change","getVenueName","input","startsWith","decodedJson","venueId","substring","computedHash","getHash","base64Data","json","JSON","parse","decodeURIComponent","escape","atob","decodedData","hashMatch","hash","qrDecode","trimmedZhName","nameZh","nameEn","string","sha256","qrEncode","typeEn","typeZh","type","venueCode","venueID","metadata","btoa","unescape","encodeURIComponent","stringify","QRPreview","data","onLeave","imgRef","encodedString","QrCodeWithLogo","image","logo","customImg","baseIcon","logoRadius","borderSize","toImage","StyledPlace","StyledQrCode","alt","Address","addressZh","addressEn","QRGenerator","fileFieldRef","React","showPreview","setShowPreview","qrCode","setQrCode","useSetState","state","setState","isVenueCodeValid","length","isVenueIdValid","isValidData","useMount","ContentWrapper","StyledForm","StyledTextField","error","inputProps","maxLength","StyledInputWrapper","StyledFileInput","accept","files","Array","from","head","reader","FileReader","readAsDataURL","onload","String","result","Divider","Actions","ButtonGroup","aria-label","Button","variant","size","startIcon","downloadImage","FormGroup","TextField","QRCodeReader","onDecode","handleFrame","code","jsQR","inversionAttempts","QRReader","Message","Overlay","pathname","qrOverlay","Welcome","container","spacer","dateText","moment","locale","updateContainer","fullWidth","bg","updateText","whiteSpacer","bar","display","flexDirection","marginLeft","fontFamily","textShadow","bottom","fontSize","marginTop","App","matchMedia","matches","test","location","hostname","adapter","browserDetails","browser","version","GlobalStyle","basename","exact","path","createGlobalStyle","isLocalhost","Boolean","match","registerValidSW","swUrl","config","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","ReactDOM","render","StrictMode","getElementById","URL","process","href","origin","addEventListener","fetch","headers","response","contentType","status","indexOf","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.bab5dbee.chunk.js","sourcesContent":["import React from \"react\";\nimport { AnimatedSwitch as Switch, spring } from \"react-router-transition\";\nimport styled from \"styled-components\";\n\nconst glide = (val: number) =>\n  spring(val, {\n    stiffness: 174,\n    damping: 24,\n  });\n\ntype Props = {\n  children: React.ReactNode;\n};\n\nexport const AnimatedSwitch = (props: Props) => {\n  return (\n    <StyledSwitch\n      {...props}\n      atEnter={{ opacity: 1, offset: 100, zIndex: 100 }}\n      atLeave={{\n        opacity: 0,\n        offset: 0,\n      }}\n      atActive={{ opacity: 1, offset: glide(0) }}\n      mapStyles={(styles) => ({\n        opacity: styles.opacity,\n        zIndex: styles.zIndex,\n        transform: `translateX(${styles.offset}%)`,\n      })}\n    />\n  );\n};\n\nconst StyledSwitch = styled(Switch)`\n  position: relative;\n  width: 100%;\n  height: 100%;\n\n  & > div {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background-color: #12b188;\n    box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n  }\n`;\n","export default __webpack_public_path__ + \"static/media/back.7bf7a56f.svg\";","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport back from \"../assets/back.svg\";\n\ntype Props = {\n  name: string;\n  backPath: string;\n};\n\nexport const Header = ({ name, backPath }: Props) => {\n  return (\n    <Wrapper>\n      <Link to={backPath}>\n        <BackButton src={back} />\n      </Link>\n      {name}\n    </Wrapper>\n  );\n};\n\nconst BackButton = styled.img`\n  height: 20px;\n  top: 14px;\n  left: 16px;\n  position: absolute;\n`;\n\nconst Wrapper = styled.div`\n  color: #ffffff;\n  background-color: #12b188;\n  text-align: center;\n  line-height: 48px;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n  flex-shrink: 0;\n`;\n","import { isIOS } from \"react-device-detect\";\n\nexport const getMediaStream = async (cameraId?: string) => {\n  if (\"mediaDevices\" in navigator) {\n    try {\n      // WebRTC adapter will polyfill this\n      return navigator.mediaDevices.getUserMedia({\n        video: cameraId\n          ? { deviceId: cameraId }\n          : { facingMode: \"environment\" },\n        audio: false,\n      });\n    } catch (e) {\n      alert(\"未能開啟相機鏡頭，請到相機設定進行設置\");\n      console.log(e);\n      return null;\n    }\n  } else {\n    alert(\n      isIOS\n        ? \"getUserMedia is not implemented in this browser, 請確保裝置在IOS 14或以上\"\n        : \"getUserMedia is not implemented in this browser\"\n    );\n    return null;\n  }\n};\n","import { any, hasIn } from \"ramda\";\nimport { useLocalStorage } from \"react-use\";\nimport constate from \"constate\";\nimport { useCallback, useEffect, useState } from \"react\";\n\nexport const [UseCameraProvider, useCamera] = constate(() => {\n  const [hasCameraSupport] = useState(\"mediaDevices\" in navigator);\n\n  const [cameraId, setCameraId] = useLocalStorage(\n    \"preferred_camera_id\",\n    \"AUTO\"\n  );\n  const [cameraList, setCameraList] = useState<InputDeviceInfo[] | null>(null);\n\n  const initCameraList = useCallback(async () => {\n    try {\n      if (\n        !hasCameraSupport ||\n        !hasIn(\"enumerateDevices\", navigator.mediaDevices)\n      ) {\n        setCameraList([]);\n        return;\n      }\n\n      const deviceList = await navigator.mediaDevices.enumerateDevices();\n\n      const cameraList = deviceList.filter<InputDeviceInfo>(\n        (device): device is InputDeviceInfo => device.kind === \"videoinput\"\n      );\n\n      setCameraList(cameraList);\n    } catch (e) {\n      alert(\"Unable to list device.\\n\\n\" + e);\n    }\n  }, [hasCameraSupport]);\n\n  useEffect(() => {\n    initCameraList();\n  }, [hasCameraSupport, initCameraList]);\n\n  useEffect(() => {\n    if (\n      cameraList !== null &&\n      cameraId !== \"AUTO\" &&\n      !any(({ deviceId }) => deviceId === cameraId, cameraList)\n    ) {\n      setCameraId(\"AUTO\");\n    }\n  }, [cameraList, setCameraId, cameraId]);\n\n  return {\n    cameraId: !any(({ deviceId }) => deviceId === cameraId, cameraList || [])\n      ? \"AUTO\"\n      : cameraId,\n    cameraList: cameraList || [],\n    setCameraId,\n    hasCameraSupport,\n  };\n});\n","import React, { useCallback, useEffect, useRef } from \"react\";\nimport styled from \"styled-components\";\nimport { useRafLoop } from \"react-use\";\nimport { getMediaStream } from \"../utils/mediaStream\";\nimport { useCamera } from \"../hooks/useCamera\";\n\ntype Props = {\n  onFrame?: (imageData: ImageData) => void;\n};\n\nexport const MediaStream = ({ onFrame }: Props) => {\n  const { cameraId } = useCamera();\n\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  const [loopStop, loopStart] = useRafLoop(() => {\n    const canvasElement = canvasRef.current;\n    const videoElement = videoRef.current;\n\n    if (\n      canvasElement &&\n      videoElement &&\n      videoElement.readyState === videoElement.HAVE_ENOUGH_DATA\n    ) {\n      const canvas = canvasElement.getContext(\"2d\");\n      if (!canvas) return;\n\n      canvasElement.height = videoElement.videoHeight;\n      canvasElement.width = videoElement.videoWidth;\n      canvas.drawImage(\n        videoElement,\n        0,\n        0,\n        canvasElement.width,\n        canvasElement.height\n      );\n\n      const imageData = canvas.getImageData(\n        0,\n        0,\n        canvasElement.width,\n        canvasElement.height\n      );\n\n      onFrame && onFrame(imageData);\n    }\n  }, false);\n\n  const initMediaStream = useCallback(async () => {\n    const videoElement = videoRef.current;\n    if (!videoElement) return;\n\n    console.log(\"cameraId\", cameraId);\n\n    const stream = await getMediaStream(\n      cameraId === \"AUTO\" ? undefined : cameraId\n    );\n    if (!stream) return;\n\n    videoElement.srcObject = stream;\n    videoElement.play();\n    loopStart();\n  }, [loopStart, cameraId]);\n\n  useEffect(() => {\n    const videoElement = videoRef.current;\n    initMediaStream();\n\n    return () => {\n      loopStop();\n      if (videoElement) {\n        const stream = videoElement.srcObject as MediaStream | null;\n        if (!stream) return;\n        const tracks = stream.getTracks();\n\n        tracks.forEach((track) => {\n          track.stop();\n        });\n\n        videoElement.srcObject = null;\n      }\n    };\n  }, [loopStart, loopStop, videoRef, initMediaStream, cameraId]);\n\n  return (\n    <>\n      <Video ref={videoRef} playsInline />\n      <Canvas ref={canvasRef} />\n    </>\n  );\n};\n\nconst Video = styled.video`\n  /* Make video to at least 100% wide and tall */\n  min-width: 100%;\n  min-height: 100%;\n\n  /* Setting width & height to auto prevents the browser from stretching or squishing the video */\n  width: auto;\n  height: auto;\n\n  /* Center the video */\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n`;\n\nconst Canvas = styled.canvas`\n  display: none;\n`;\n","import { FormControl, InputLabel, MenuItem, Select } from \"@material-ui/core\";\nimport { isEmpty, isNil } from \"ramda\";\nimport styled from \"styled-components\";\nimport { Header } from \"../../components/Header\";\nimport { MediaStream } from \"../../components/MediaStream\";\nimport { useCamera } from \"../../hooks/useCamera\";\n\nexport const CameraSetting = () => {\n  const { cameraId, setCameraId, cameraList } = useCamera();\n\n  return (\n    <PageWrapper>\n      <Header backPath=\"/\" name=\"相機設定\" />\n      <FormWrapper>\n        <StyledFormControl>\n          <InputLabel id=\"cameraId\">相機選擇</InputLabel>\n          <Select\n            labelId=\"cameraId\"\n            id=\"demo-simple-select\"\n            value={cameraId}\n            onChange={(e) => {\n              setCameraId((e.target.value as string) || \"AUTO\");\n            }}\n          >\n            <MenuItem value=\"AUTO\">自動</MenuItem>\n            {cameraList.map(({ deviceId, label }) => (\n              <MenuItem value={deviceId} key=\"deviceId\">\n                {isNil(label) || isEmpty(label) ? deviceId : label}\n              </MenuItem>\n            ))}\n          </Select>\n        </StyledFormControl>\n      </FormWrapper>\n      <VideoContainer>\n        <MediaStream />\n      </VideoContainer>\n    </PageWrapper>\n  );\n};\n\nconst PageWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n  display: flex;\n  flex-direction: column;\n  background-color: #fff;\n`;\n\nconst VideoContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  position: relative;\n`;\n\nconst FormWrapper = styled.div`\n  width: 100%;\n  display: flex;\n`;\n\nconst StyledFormControl = styled(FormControl)`\n  width: 100%;\n\n  &.MuiFormControl-root {\n    margin: 8px;\n  }\n`;\n","export default __webpack_public_path__ + \"static/media/cross.d2bbc7f7.svg\";","export default __webpack_public_path__ + \"static/media/tick.6d45b966.svg\";","import styled from \"styled-components\";\n\nexport const ConfirmButton = styled.button<{ shadowed?: boolean }>`\n  display: block;\n  margin: auto;\n  margin-bottom: 16px;\n  font-size: 24px;\n  padding: 10px 0;\n  width: 80%;\n  border-radius: 48px;\n  flex-shrink: 0;\n  max-width: 280px;\n  font-weight: 500;\n\n  ${(props) =>\n    props.disabled\n      ? `background-color: #D3D3D3;\n        color: #A1A1A1;\n        `\n      : `\n        background-color: #fed426;\n      `}\n\n  border: 0;\n  outline: none;\n  ${(props) =>\n    props.shadowed ? \"box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.5);\" : \"\"}\n\n  &:focus {\n    outline: none;\n    text-decoration: none;\n  }\n`;\n\nexport const ModalConfirmButton = styled(ConfirmButton)`\n  font-size: 16px;\n  padding: 12px 0;\n  width: 90%;\n  font-weight: unset;\n`;\n","import styled from \"styled-components\";\nimport React from \"react\";\nimport TextareaAutosize from \"react-autosize-textarea\";\n\ntype Props = {\n  value: string;\n  onChange?: (value: string) => void;\n  placeholder?: string;\n  readOnly?: boolean;\n};\n\nexport const Place = ({\n  value,\n  onChange,\n  placeholder,\n  readOnly,\n  ...rest\n}: Props) => {\n  return (\n    <StyledInput\n      value={value}\n      placeholder={placeholder}\n      readOnly={readOnly}\n      onChange={(e: any) => {\n        onChange && onChange(e.target.value);\n      }}\n      async\n      {...rest}\n    />\n  );\n};\n\nexport const StyledInput = styled(TextareaAutosize)`\n  text-align: center;\n  font-size: 32px;\n  background-color: transparent;\n  border: 0;\n  outline: none;\n  margin: 4px 0;\n  color: #fed426;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n  width: 100%;\n\n  padding-left: 0;\n  padding-right: 0;\n  line-height: 36px;\n  font-weight: 500;\n\n  &:focus {\n    outline: none;\n  }\n`;\n","export default __webpack_public_path__ + \"static/media/crossBlack.aafc0aee.svg\";","export default __webpack_public_path__ + \"static/media/greenTick.5e528318.svg\";","import React, { useState, useEffect, useMemo } from \"react\";\nimport Modal from \"react-modal\";\nimport crossBlack from \"../../assets/crossBlack.svg\";\nimport greenTick from \"../../assets/greenTick.svg\";\n\nimport styled from \"styled-components\";\nimport { ModalConfirmButton } from \"../../components/Button\";\nimport { disableBodyScroll } from \"body-scroll-lock\";\nimport { Dayjs } from \"dayjs\";\n\ntype Props = {\n  isModalOpen: boolean;\n  onCancel: () => void;\n  onConfirm: (value: number) => void;\n  selectedAutoLeaveHour: number;\n  date: Dayjs;\n};\n\nexport const AutoLeaveModal = ({\n  isModalOpen,\n  onCancel,\n  onConfirm,\n  selectedAutoLeaveHour,\n  date,\n}: Props) => {\n  const [autoLeaveHourTmp, setAutoLeaveHourTmp] = useState(\n    selectedAutoLeaveHour\n  );\n\n  useEffect(() => {\n    setAutoLeaveHourTmp(selectedAutoLeaveHour);\n  }, [setAutoLeaveHourTmp, selectedAutoLeaveHour]);\n\n  const handleConfirm = () => {\n    onConfirm(autoLeaveHourTmp);\n  };\n\n  const toDate = useMemo(() => date.add(autoLeaveHourTmp, \"hour\"), [\n    date,\n    autoLeaveHourTmp,\n  ]);\n\n  const disableScroll = () => {\n    const root = document.querySelector(\"#scroll\");\n    if (!root) return;\n    disableBodyScroll(root);\n  };\n\n  return (\n    <Modal\n      isOpen={isModalOpen}\n      onRequestClose={onCancel}\n      style={{\n        overlay: {\n          backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n        },\n        content: {\n          outline: \"none\",\n          border: \"0\",\n          padding: \"16px\",\n          borderRadius: \"8px\",\n          width: \"240px\",\n          position: \"absolute\",\n          top: \"50%\",\n          left: \"50%\",\n          transform: \"translate(-50%, -50%)\",\n          height: \"370px\",\n          overflow: \"hidden\",\n        },\n      }}\n      ariaHideApp={false}\n      onAfterOpen={disableScroll}\n    >\n      <CrossWrapper>\n        <Cross src={crossBlack} onClick={onCancel} />\n      </CrossWrapper>\n      <Title>設罝自動離開時間</Title>\n      <HourListWrapper id=\"scroll\">\n        <HourList>\n          {[1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((hour) => (\n            <HourListItem\n              onClick={() => {\n                setAutoLeaveHourTmp(hour);\n              }}\n              key={hour}\n            >\n              + {hour}小時\n              {autoLeaveHourTmp === hour && <SelectedTick src={greenTick} />}\n            </HourListItem>\n          ))}\n        </HourList>\n      </HourListWrapper>\n      <TimeWrapper>\n        <div>於{date.format(\"MM-DD HH:mm\")} 進入場所</div>\n        <div>於{toDate.format(\"MM-DD HH:mm\")} 自動離開</div>\n      </TimeWrapper>\n      <ModalConfirmButton onClick={handleConfirm}>確認</ModalConfirmButton>\n    </Modal>\n  );\n};\n\nconst Cross = styled.img`\n  height: 20px;\n`;\n\nconst CrossWrapper = styled.div`\n  display: flex;\n  width: 100%;\n  justify-content: flex-end;\n`;\n\nconst Title = styled.h1`\n  font-size: 20px;\n  text-align: center;\n  margin-top: 20px;\n  margin-bottom: 0;\n`;\n\nconst HourListWrapper = styled.div`\n  overflow: auto;\n  height: 180px;\n  padding: 0 8px;\n`;\n\nconst HourList = styled.ul`\n  list-style: none;\n  margin: 0;\n  padding: 0;\n`;\n\nconst HourListItem = styled.li`\n  line-height: 40px;\n  border-bottom: 1px #eeeeee solid;\n  padding: 0 8px;\n`;\n\nconst TimeWrapper = styled.div`\n  font-size: 12px;\n  text-align: center;\n  padding: 16px 0;\n`;\n\nconst SelectedTick = styled.img`\n  height: 32px;\n  position: relative;\n  float: right;\n  top: 4px;\n`;\n","import React, { useMemo } from \"react\";\nimport Modal from \"react-modal\";\nimport crossBlack from \"../../assets/crossBlack.svg\";\n\nimport styled from \"styled-components\";\nimport { ModalConfirmButton } from \"../../components/Button\";\nimport { Dayjs } from \"dayjs\";\n\ntype Props = {\n  isModalOpen: boolean;\n  onCancel: () => void;\n  onLeaveNow: () => void;\n  onLeaved: () => void;\n  place: string;\n  date: Dayjs;\n  autoLeaveHour: number;\n};\n\nexport const LeaveModal = ({\n  isModalOpen,\n  onCancel,\n  onLeaveNow,\n  onLeaved,\n  place,\n  date,\n  autoLeaveHour,\n}: Props) => {\n  const shouldDisplayAutoLeave = autoLeaveHour !== 0;\n\n  const toDate = useMemo(() => date.add(autoLeaveHour, \"hour\"), [\n    date,\n    autoLeaveHour,\n  ]);\n\n  return (\n    <Modal\n      isOpen={isModalOpen}\n      onRequestClose={onCancel}\n      style={{\n        overlay: {\n          backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n        },\n        content: {\n          outline: \"none\",\n          border: \"0\",\n          padding: \"16px\",\n          borderRadius: \"8px\",\n          width: \"240px\",\n          position: \"absolute\",\n          top: \"50%\",\n          left: \"50%\",\n          transform: \"translate(-50%, -50%)\",\n          height: shouldDisplayAutoLeave ? \"430px\" : \"390px\",\n          overflow: \"hidden\",\n        },\n      }}\n      ariaHideApp={false}\n    >\n      <CrossWrapper>\n        <Cross src={crossBlack} onClick={onCancel} />\n      </CrossWrapper>\n      <Msg>你已進入場所</Msg>\n      <Place>{place}</Place>\n      <Time>{date.format(\"YYYY-MM-DD HH:mm\")}</Time>\n      <Title>你現在要離開嗎？</Title>\n      {shouldDisplayAutoLeave && (\n        <AutoLeave>於{toDate.format(\"MM-DD HH:mm\")} 自動離開</AutoLeave>\n      )}\n      <ModalConfirmButton onClick={onLeaveNow}>\n        是的，我現在要離開\n      </ModalConfirmButton>\n      <GreenButton onClick={onLeaved}>我現已經離開了</GreenButton>\n    </Modal>\n  );\n};\n\nconst Cross = styled.img`\n  height: 20px;\n`;\n\nconst CrossWrapper = styled.div`\n  display: flex;\n  width: 100%;\n  justify-content: flex-end;\n  margin-bottom: 8px;\n`;\n\nconst Title = styled.div`\n  font-size: 20px;\n  text-align: center;\n  margin: 64px 0;\n  font-weight: 500;\n`;\n\nconst GreenButton = styled(ModalConfirmButton)`\n  background-color: #12b188;\n  color: #fff;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n`;\n\nconst Msg = styled.div`\n  text-align: center;\n  font-size: 16px;\n`;\n\nconst Time = styled.div`\n  text-align: center;\n  font-size: 14px;\n`;\n\nconst Place = styled.div`\n  color: unset;\n  text-shadow: none;\n  text-align: center;\n  font-size: 28px;\n  font-weight: 500;\n  line-height: 48px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n`;\n\nconst AutoLeave = styled.div`\n  font-size: 12px;\n  text-align: center;\n  padding: 12px 0;\n`;\n","import React, { forwardRef, useImperativeHandle } from \"react\";\n\nimport styled from \"styled-components\";\nimport Picker from \"pickerjs\";\nimport \"pickerjs/dist/picker.min.css\";\n\nexport type DatePickerHandler = {\n  init: () => void;\n};\n\nexport const DatePicker = forwardRef((props: any, ref: any) => {\n  // mount effect wont work on model, need to call this after onAfterOpen event\n  useImperativeHandle(ref, () => ({\n    init: () => {\n      const ele = document.querySelector(\n        \".js-inline-picker\"\n      ) as HTMLElement | null;\n      if (!ele) return;\n      new Picker(ele, {\n        inline: true,\n        rows: 2,\n      });\n    },\n  }));\n\n  return (\n    <Wrapper>\n      <div className=\"js-inline-picker\" />\n    </Wrapper>\n  );\n});\n\nconst Wrapper = styled.div`\n  & .picker {\n    font-size: 12px;\n  }\n\n  & .picker-dialog {\n    border: 0;\n  }\n\n  & .picker-cell:before {\n    background-image: unset;\n  }\n\n  & .picker-cell:after {\n    background-image: unset;\n  }\n\n  & .picker-picked {\n    color: unset;\n    border-top: #12b188 1px solid;\n    border-bottom: #12b188 1px solid;\n  }\n\n  & .picker-cell {\n    padding: 0 4px;\n  }\n\n  & .picker-item {\n    padding: 3px 0px;\n  }\n\n  & .picker-cell + .picker-cell {\n    border: 0;\n  }\n`;\n","import React, { useRef } from \"react\";\nimport Modal from \"react-modal\";\nimport crossBlack from \"../../assets/crossBlack.svg\";\n\nimport styled from \"styled-components\";\nimport { ModalConfirmButton } from \"../../components/Button\";\nimport { DatePicker, DatePickerHandler } from \"../../components/DatePicker\";\n\ntype Props = {\n  isModalOpen: boolean;\n  onCancel: () => void;\n  onConfirm: () => void;\n};\n\nexport const TimePickModal = ({ isModalOpen, onCancel, onConfirm }: Props) => {\n  const datePickerRef = useRef<DatePickerHandler>(null);\n\n  const initPicker = () => {\n    datePickerRef.current && datePickerRef.current.init();\n  };\n\n  return (\n    <Modal\n      isOpen={isModalOpen}\n      onRequestClose={onCancel}\n      style={{\n        overlay: {\n          backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n        },\n        content: {\n          outline: \"none\",\n          border: \"0\",\n          padding: \"16px\",\n          borderRadius: \"8px\",\n          width: \"240px\",\n          position: \"absolute\",\n          top: \"50%\",\n          left: \"50%\",\n          transform: \"translate(-50%, -50%)\",\n          height: \"280px\",\n          overflow: \"hidden\",\n        },\n      }}\n      ariaHideApp={false}\n      onAfterOpen={initPicker}\n    >\n      <CrossWrapper>\n        <Cross src={crossBlack} onClick={onCancel} />\n      </CrossWrapper>\n      <Title>你是什麼時候離開？</Title>\n      <TimePickerWrapper>\n        <DatePicker ref={datePickerRef} />\n      </TimePickerWrapper>\n      <ModalConfirmButton onClick={onConfirm}>確認</ModalConfirmButton>\n    </Modal>\n  );\n};\n\nconst Cross = styled.img`\n  height: 20px;\n`;\n\nconst CrossWrapper = styled.div`\n  display: flex;\n  width: 100%;\n  justify-content: flex-end;\n`;\n\nconst Title = styled.div`\n  font-size: 20px;\n  text-align: center;\n  margin-top: 24px;\n`;\n\nconst TimePickerWrapper = styled.div`\n  border-bottom: 1px #eeeeee solid;\n  border-top: 1px #eeeeee solid;\n  padding: 32px 0;\n  margin: 16px 0;\n`;\n","export default __webpack_public_path__ + \"static/media/checkbox.4e2450ab.svg\";","export default __webpack_public_path__ + \"static/media/checkboxChecked.7f6c2da0.svg\";","import React from \"react\";\nimport styled from \"styled-components\";\nimport checkbox from \"../assets/checkbox.svg\";\nimport checkboxChecked from \"../assets/checkboxChecked.svg\";\nimport { isAndroid } from \"react-device-detect\";\nimport { Checkbox } from \"@material-ui/core\";\n\ntype Props = {\n  checked: boolean;\n  onChange: (value: boolean) => void;\n};\n\nexport const CheckBox = ({ onChange, checked }: Props) => {\n  const handleClick = () => {\n    onChange(!checked);\n  };\n\n  return isAndroid ? (\n    <StyledCheckbox checked={checked} onClick={handleClick} color=\"primary\" />\n  ) : (\n    <IOSCheckBox\n      src={checked ? checkboxChecked : checkbox}\n      onClick={handleClick}\n    />\n  );\n};\n\nconst IOSCheckBox = styled.img`\n  height: 16px;\n  display: inline-block;\n  vertical-align: top;\n  margin: 0 8px;\n  margin-top: 8px;\n`;\n\nconst StyledCheckbox = styled(Checkbox)`\n  display: inline-block;\n  vertical-align: top;\n  margin: 0 8px !important;\n  padding: 0 !important;\n\n  &.MuiCheckbox-colorPrimary {\n    color: #fff !important;\n  }\n`;\n","export default __webpack_public_path__ + \"static/media/icon.61ed31dc.png\";","import React, { useEffect, useMemo, useState } from \"react\";\nimport styled from \"styled-components\";\nimport cross from \"../../assets/cross.svg\";\n\nimport tick from \"../../assets/tick.svg\";\n\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\nimport { ConfirmButton } from \"../../components/Button\";\nimport { Place } from \"../../components/Place\";\nimport { AutoLeaveModal } from \"./AutoLeaveModal\";\nimport { LeaveModal } from \"./LeaveModal\";\nimport { TimePickModal } from \"./TimePickModal\";\nimport { isEmpty, trim } from \"ramda\";\nimport { CheckBox } from \"../../components/CheckBox\";\nimport dayjs from \"dayjs\";\nimport icon from '../../assets/icon.png';\n\nexport const Confirm = () => {\n  const browserHistory = useHistory();\n  const browserLocation = useLocation();\n  const [autoLeave, setAutoLeave] = useState(true);\n  const [autoLeaveHour, setAutoLeaveHour] = useState(4);\n  const [isAutoLeaveModalOpen, setIsAutoLeaveModalOpen] = useState(false);\n  const [isLeaveModalOpen, setIsLeaveModalOpen] = useState(false);\n  const [isTimePickModalOpen, setIsTimePickModalOpen] = useState(false);\n\n  const place = useMemo(\n    () => trim(new URLSearchParams(browserLocation.search).get(\"place\") || \"\"),\n    [browserLocation.search]\n  );\n\n  useEffect(() => {\n    // if (!place || isEmpty(place)) browserHistory.push(\"/\");\n  }, [browserHistory, place]);\n\n  const date = useMemo(() => dayjs(), []);\n\n  const handleSetAutoLeaveHour = (value: number) => {\n    setAutoLeaveHour(value);\n    setIsAutoLeaveModalOpen(false);\n  };\n\n  const handleLeavePage = () => {\n    setIsAutoLeaveModalOpen(false);\n    setIsLeaveModalOpen(false);\n    setIsTimePickModalOpen(false);\n    browserHistory.push(\"/\");\n  };\n\n  const handleLeaved = () => {\n    setIsLeaveModalOpen(false);\n    setIsTimePickModalOpen(true);\n  };\n\n  return (\n    <>\n      <PageWrapper>\n      <img style={{position: 'absolute', top: 10, left: (window.innerWidth / 2) - 50, width: 100, height: 100}} src={icon}/>\n        <Header>\n          <Link to=\"/\">\n            <Cross src={cross} />\n          </Link>\n        </Header>\n        <MessageWrapper>\n          <Msg>你已進入場所</Msg>\n          <PlaceWrapper>\n            <Place value={place || \"\"} readOnly />\n          </PlaceWrapper>\n          <Time>{date.format(\"YYYY-MM-DD HH:mm\")}</Time>\n        </MessageWrapper>\n        <TickWrapper>\n          <TickWrapperInner>\n            <Tick src={tick} />\n          </TickWrapperInner>\n        </TickWrapper>\n        <div style={{flex: 1}} />\n        <ActionGroup>\n          <ConfirmButton\n            shadowed\n            onClick={() => {\n              setIsLeaveModalOpen(true);\n            }}\n          >\n            離開埸所\n          </ConfirmButton>\n          <LeaveMessage>當你離開時請緊記按\"離開\"</LeaveMessage>\n          <AutoLeave>\n            <CheckBoxWrapper>\n              <CheckBox checked={autoLeave} onChange={setAutoLeave} />\n              {autoLeaveHour}小時後自動離開\n            </CheckBoxWrapper>\n            <Change onClick={() => {setIsAutoLeaveModalOpen(true)}}>變更</Change>\n          </AutoLeave>\n        </ActionGroup>\n      </PageWrapper>\n      <AutoLeaveModal\n        isModalOpen={isAutoLeaveModalOpen}\n        onCancel={() => {\n          setIsAutoLeaveModalOpen(false);\n        }}\n        onConfirm={handleSetAutoLeaveHour}\n        selectedAutoLeaveHour={autoLeaveHour}\n        date={date}\n      />\n      <LeaveModal\n        isModalOpen={isLeaveModalOpen}\n        onCancel={() => {\n          setIsLeaveModalOpen(false);\n        }}\n        onLeaveNow={handleLeavePage}\n        onLeaved={handleLeaved}\n        place={place || \"\"}\n        date={date}\n        autoLeaveHour={autoLeave ? autoLeaveHour : 0}\n      />\n      <TimePickModal\n        isModalOpen={isTimePickModalOpen}\n        onCancel={() => {\n          setIsTimePickModalOpen(false);\n        }}\n        onConfirm={handleLeavePage}\n      />\n    </>\n  );\n};\n\nconst PageWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n  display: flex;\n  flex-direction: column;\n  color: #fff;\n`;\n\nconst Header = styled.div`\n  width: 100%;\n  display: flex;\n  justify-content: flex-end;\n  flex-shrink: 0;\n`;\n\nconst Cross = styled.img`\n  height: 20px;\n  margin: 24px;\n`;\n\nconst PlaceWrapper = styled.div`\n  padding: 0 32px;\n`;\n\nconst MessageWrapper = styled.div`\n  width: 100%;\n  height: 50%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n\nconst TickWrapper = styled.div`\n  height: 100%;\n  width: 100%;\n  text-align: center;\n`;\n\nconst TickWrapperInner = styled.div`\n  height: 100%;\n  max-height: 200px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n\nconst Tick = styled.img`\n  display: inline-block;\n  height: 100%;\n  max-height: 110px;\n`;\n\nconst Msg = styled.div`\n  color: #ffffff;\n  text-align: center;\n  font-size: 15px;\n`;\n\nconst Time = styled.div`\n  color: #ffffff;\n  text-align: center;\n`;\n\nconst AutoLeave = styled.div`\n  margin-bottom: 16px;\n  width: 100%;\n  max-width: 380px;\n  margin: 16px auto;\n  display: flex;\n  flex-shrink: 0;\n  font-size: 14px;\n`;\n\nconst CheckBoxWrapper = styled.div`\n  width: 100%;\n  text-align: left;\n  padding-left: 24px;\n  line-height: 32px;\n  align-item: center;\n  display: flex;\n`;\n\nconst Change = styled.div`\n  flex-shrink: 0;\n  padding-right: 24px;\n  line-height: 32px;\n  color: yellow;\n  text-decoration: underline;\n  text-shadow: none\n`;\n\nconst LeaveMessage = styled.div`\n  text-align: center;\n  // padding-bottom: 16px;\n  flex-shrink: 0;\n`;\n\nconst ActionGroup = styled.div`\n  width: 100%;\n  flex-shrink: 0;\n`;\n","import { isEmpty, trim } from \"ramda\";\nimport { sha256 } from \"js-sha256\";\n\ntype DecodedJSON = {\n  hash: string;\n  metadata: { typeEn: string; typeZh: string };\n  nameEn: string;\n  nameZh: string;\n  type: string;\n};\n\nexport type EncodeParam = {\n  typeEn: string;\n  typeZh: string;\n  nameEn: string;\n  nameZh: string;\n  type: string;\n  venueCode: string;\n  venueID: string;\n};\n\nexport type EnhancedEncodeParam = EncodeParam & {\n  addressEn: string;\n  addressZh: string;\n  customImg: string | null;\n};\n\n// https://github.com/aaasssdddwww/back-home-safe/pull/7\nexport const qrDecode = (input: string): DecodedJSON | null => {\n  if (!input.startsWith(\"HKEN:\")) return null;\n  const venueId = input.substring(6, 14);\n  const computedHash = getHash(venueId);\n\n  const base64Data = input.substring(14);\n  const json: DecodedJSON = JSON.parse(\n    decodeURIComponent(escape(window.atob(base64Data)))\n  );\n\n  console.log({\n    input,\n    venueId,\n    decodedData: json,\n    computedHash,\n    hashMatch: computedHash === json.hash,\n  });\n\n  return json;\n};\n\nexport const getVenueName = (input: string) => {\n  if (!input.startsWith(\"HKEN:\")) return \"\";\n  const decodedJson = qrDecode(input);\n  if (!decodedJson) return \"\";\n\n  const trimmedZhName = decodedJson.nameZh ? trim(decodedJson.nameZh) : \"\";\n  const name = !isEmpty(trimmedZhName) ? trimmedZhName : decodedJson.nameEn;\n\n  return name;\n};\n\n// http://blog.headuck.com/2020/11/19/%e3%80%8c%e5%ae%89%e5%bf%83%e5%87%ba%e8%a1%8c%e3%80%8d%e8%83%bd%e5%90%a6%e5%ae%89%e5%bf%83%e4%bd%bf%e7%94%a8%ef%bc%9f%ef%bc%88%e4%ba%8c%ef%bc%89/?__cf_chl_captcha_tk__=872d5919c48d1b25116c910c9de6c92e2b27facf-1613591353-0-AcPHoKV7LGMua5u8nTgTCYJXS9ZaCBaNSavb3A1E6F6HLsITHuJ9oA-SH4uu4UqnYiphktotJfPYaSUxQSmcfTk6y8iVJb873VgLU0qrdjxU6pZjBx5UxwqLDXom03026Z7EFmoHq70-CVMFVFPdTLHLXkIEYDFHZeqU0RE5KUjOwoJpOIFRLfsXwtRYGefQtspNIySZCg6u5sSDpxdRNc5dpOfdN2dybpb0G5T7j2URLhglnm7gH_chBuLNtSg-awOlrCk7Ljktwxte6lQj6AoNG2Cbqry8_-VvWdPX_1BdDfQ3apJvfUewJ6AIqHfDclXLrRril2vcMckHgrgvATQa4rcOr6AwzaZBcf90sfp3bnNQw59oszIkaV3Dzb8TrJlm4jWq42q3ijXTUua1WKWPDBzDBNl1SjLtar-AI3kzrgwFgaXkWkAxakLyTBJ7wszVHo0DHdCtE_Ozma4VkIZWZSF_gZ3dgBeAbBdwW8XTPsliqfplIeHsML8uJ2dAlxxPIcDDJ7a0gYr2YK4Jdl1ot568DfdMOuzhoMzy2OJKT9YFITl4k0Zger3M5kjSUPjgAOjB4j4p2M6kla2DERXhQj0IRi-sXG92OWEX5-Joa4x41eMqH6X6La4CaSfamwyN3gSwFtBfxvPA2V-Hss3Vj4zEgGs75oxSS7ZrUwbwOORal3VPYiWHzaif0qbWw93UBfuMgfsAyJnvAa5TntFPz3PZqpY9rg6gExJSaKFGBKAnOxyitUe1BDt0rW76u_qay7xF1WlCGCtIasM82E5nF1X51J_sXcAMwmZyG29b\nexport const getHash = (venueId: string) => {\n  const string = `HKEN${venueId}2020`;\n  return sha256(string);\n};\n\nexport const qrEncode = ({\n  typeEn,\n  typeZh,\n  nameEn,\n  nameZh,\n  type,\n  venueCode,\n  venueID,\n}: EncodeParam) => {\n  const json = {\n    metadata: !isEmpty(typeEn) || !isEmpty(typeZh) ? { typeEn, typeZh } : null,\n    nameZh,\n    nameEn,\n    type,\n    hash: getHash(venueID),\n  };\n\n  const base64Data = window.btoa(\n    unescape(encodeURIComponent(JSON.stringify(json)))\n  );\n\n  return `HKEN:${venueCode}${venueID}${base64Data}`;\n};\n","export default __webpack_public_path__ + \"static/media/baseIcon.aa0e0793.png\";","import { isEmpty } from \"ramda\";\nimport React, { useEffect, useRef } from \"react\";\nimport { Place } from \"../../components/Place\";\nimport cross from \"../../assets/cross.svg\";\n\nimport { EnhancedEncodeParam, qrEncode } from \"../../utils/qr\";\nimport styled from \"styled-components\";\nimport QrCodeWithLogo from \"qrcode-with-logos\";\nimport baseIcon from \"../../assets/baseIcon.png\";\n\ntype Props = {\n  data: EnhancedEncodeParam;\n  onLeave: () => void;\n};\n\nexport const QRPreview = ({ data, onLeave }: Props) => {\n  const imgRef = useRef<HTMLImageElement>(null);\n\n  useEffect(() => {\n    if (!imgRef.current) return;\n\n    const encodedString = qrEncode(data);\n\n    new QrCodeWithLogo({\n      image: imgRef.current,\n      content: encodedString,\n      width: 380,\n      logo: {\n        src: data.customImg || baseIcon,\n        logoRadius: 8,\n        borderSize: 0,\n      },\n    }).toImage();\n  }, [data]);\n\n  return data ? (\n    <PageWrapper>\n      <Header>\n        <Cross src={cross} onClick={onLeave} />\n      </Header>\n      <MessageWrapper>\n        <PlaceWrapper>\n          {data.nameEn && !isEmpty(data.nameZh) && (\n            <StyledPlace value={data.nameZh || \"\"} readOnly />\n          )}\n          {data.nameEn && !isEmpty(data.nameEn) && (\n            <StyledPlace value={data.nameEn || \"\"} readOnly />\n          )}\n        </PlaceWrapper>\n      </MessageWrapper>\n      <TickWrapper>\n        <TickWrapperInner>\n          <StyledQrCode ref={imgRef} alt=\"qrCode\" />\n        </TickWrapperInner>\n      </TickWrapper>\n      <Address>\n        {data.addressZh && !isEmpty(data.addressZh) && (\n          <div>{data.addressZh}</div>\n        )}\n        {data.addressEn && !isEmpty(data.addressEn) && (\n          <div>{data.addressEn}</div>\n        )}\n      </Address>\n    </PageWrapper>\n  ) : (\n    <></>\n  );\n};\n\nconst PageWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  color: #fff;\n  background-color: #12b188;\n  position: absolute;\n`;\n\nconst Header = styled.div`\n  width: 100%;\n  display: flex;\n  justify-content: flex-end;\n  flex-shrink: 0;\n`;\n\nconst Cross = styled.img`\n  height: 20px;\n  margin: 24px;\n`;\n\nconst StyledPlace = styled(Place)`\n  font-size: 20px;\n  line-height: 20px;\n  text-shadow: none;\n`;\n\nconst PlaceWrapper = styled.div`\n  padding: 0 32px;\n`;\n\nconst MessageWrapper = styled.div`\n  width: 100%;\n  height: 50%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n\nconst TickWrapper = styled.div`\n  height: 100%;\n  width: 100%;\n  text-align: center;\n`;\n\nconst TickWrapperInner = styled.div`\n  height: 100%;\n  max-height: 280px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n\nconst StyledQrCode = styled.img`\n  display: inline-block;\n  height: 100%;\n  max-height: 300px;\n  margin: 0 auto;\n`;\n\nconst Address = styled.div`\n  width: 100%;\n  height: 50%;\n  text-align: center;\n`;\n","import {\n  Button,\n  ButtonGroup,\n  Divider,\n  FormGroup,\n  TextField,\n} from \"@material-ui/core\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { useSetState, useMount } from \"react-use\";\nimport styled from \"styled-components\";\nimport { Header } from \"../../components/Header\";\nimport { EnhancedEncodeParam, qrEncode } from \"../../utils/qr\";\nimport QrCodeWithLogo from \"qrcode-with-logos\";\nimport baseIcon from \"../../assets/baseIcon.png\";\nimport { head } from \"ramda\";\nimport { disableBodyScroll } from \"body-scroll-lock\";\nimport SaveIcon from \"@material-ui/icons/Save\";\nimport { QRPreview } from \"./QRPreview\";\n\nexport const QRGenerator = () => {\n  const imgRef = useRef<HTMLImageElement>(null);\n  const fileFieldRef = React.useRef<HTMLInputElement>(null);\n\n  const [showPreview, setShowPreview] = useState(false);\n  const [qrCode, setQrCode] = useState<QrCodeWithLogo | null>(null);\n  const [state, setState] = useSetState<EnhancedEncodeParam>({\n    typeEn: \"Stores/Shopping Malls\",\n    typeZh: \"商店/商場\",\n    nameEn: \"CityWalk\",\n    nameZh: \"荃新天地\",\n    type: \"IMPORT\",\n    venueCode: \"0\",\n    venueID: \"WHBvLDSa\",\n    addressEn: \"1 & 18 Yeung Uk Rd, Tsuen Wan, Hong Kong\",\n    addressZh: \"荃灣楊屋道1號\",\n    customImg: null,\n  });\n\n  const isVenueCodeValid = state.venueCode.length === 1;\n  const isVenueIdValid = state.venueID.length === 8;\n\n  const isValidData = isVenueCodeValid && isVenueIdValid;\n\n  useMount(() => {\n    const root = document.querySelector(\"#scroll\");\n    if (!root) return;\n    disableBodyScroll(root);\n  });\n\n  useEffect(() => {\n    if (!imgRef.current || !isValidData) return;\n    const encodedString = qrEncode(state);\n\n    const qrCode = new QrCodeWithLogo({\n      image: imgRef.current,\n      content: encodedString,\n      width: 380,\n      logo: {\n        src: state.customImg || baseIcon,\n        logoRadius: 8,\n        borderSize: 0,\n      },\n    });\n\n    qrCode.toImage();\n    setQrCode(qrCode);\n  }, [state, isValidData]);\n\n  const handleFileSelected = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(e.target.files || []);\n    const img = head(files);\n    if (!img) {\n      setState({ customImg: null });\n    } else {\n      const reader = new FileReader();\n      reader.readAsDataURL(img);\n      reader.onload = () => setState({ customImg: String(reader.result) });\n    }\n  };\n\n  const handleDownload = () => {\n    if (!qrCode) return;\n    qrCode.downloadImage(\"QR Code\");\n  };\n\n  return (\n    <PageWrapper>\n      <Header backPath=\"/\" name=\"生成二維碼\" />\n      <ContentWrapper id=\"scroll\">\n        <StyledForm>\n          <StyledTextField\n            label=\"場所種類(中文) (typeZh)\"\n            value={state.typeZh}\n            onChange={(e) => {\n              setState({ typeZh: e.target.value });\n            }}\n          />\n          <StyledTextField\n            label=\"場所種類(英文) (typeEn)\"\n            value={state.typeEn}\n            onChange={(e) => {\n              setState({ typeEn: e.target.value });\n            }}\n          />\n          <StyledTextField\n            label=\"場所名字(中文) (nameZh)\"\n            value={state.nameZh}\n            onChange={(e) => {\n              setState({ nameZh: e.target.value });\n            }}\n          />\n          <StyledTextField\n            label=\"場所名字(英文) (nameEn)\"\n            value={state.nameEn}\n            onChange={(e) => {\n              setState({ nameEn: e.target.value });\n            }}\n          />\n          <StyledTextField\n            label=\"場所地址(中文) (預覽用)\"\n            value={state.addressZh}\n            onChange={(e) => {\n              setState({ addressZh: e.target.value });\n            }}\n          />\n          <StyledTextField\n            label=\"場所地址(英文) (預覽用)\"\n            value={state.addressEn}\n            onChange={(e) => {\n              setState({ addressEn: e.target.value });\n            }}\n          />\n          <StyledTextField\n            label=\"類型\"\n            value={state.type}\n            onChange={(e) => {\n              setState({ type: e.target.value });\n            }}\n          />\n          <StyledTextField\n            label=\"場地編碼 (唔知唔好搞)\"\n            value={state.venueCode}\n            onChange={(e) => {\n              setState({ venueCode: e.target.value });\n            }}\n            error={!isVenueCodeValid}\n            inputProps={{\n              maxLength: 1,\n            }}\n          />\n          <StyledTextField\n            label=\"場地ID (唔知唔好搞)\"\n            value={state.venueID}\n            onChange={(e) => {\n              setState({ venueID: e.target.value });\n            }}\n            error={!isVenueIdValid}\n            inputProps={{\n              maxLength: 8,\n            }}\n          />\n          <StyledInputWrapper>\n            <div>自定Icon</div>\n            <StyledFileInput\n              type=\"file\"\n              name=\"avatar\"\n              accept=\"image/png, image/jpeg\"\n              ref={fileFieldRef}\n              onChange={handleFileSelected}\n            />\n          </StyledInputWrapper>\n        </StyledForm>\n        <Divider />\n        <Actions>\n          <ButtonGroup aria-label=\"outlined primary button group\">\n            <Button\n              variant=\"contained\"\n              size=\"small\"\n              startIcon={<SaveIcon />}\n              onClick={handleDownload}\n              disabled={!isValidData}\n            >\n              儲存\n            </Button>\n            <Button\n              variant=\"contained\"\n              size=\"small\"\n              startIcon={<SaveIcon />}\n              onClick={() => {\n                setShowPreview(true);\n              }}\n              disabled={!isValidData}\n            >\n              預覽\n            </Button>\n          </ButtonGroup>\n        </Actions>\n        <StyledQrCode ref={imgRef} alt=\"qrCode\" />\n      </ContentWrapper>\n      {showPreview && (\n        <QRPreview\n          data={state}\n          onLeave={() => {\n            setShowPreview(false);\n          }}\n        />\n      )}\n    </PageWrapper>\n  );\n};\n\nconst PageWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  background-color: #fff;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst ContentWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n`;\n\nconst StyledForm = styled(FormGroup)`\n  padding: 8px 16px;\n`;\n\nconst StyledTextField = styled(TextField)`\n  &.MuiFormControl-root {\n    margin-top: 8px;\n  }\n`;\n\nconst StyledInputWrapper = styled.div`\n  font-size: 12px;\n  padding: 4px 0;\n  color: rgba(0, 0, 0, 0.54);\n`;\n\nconst StyledFileInput = styled.input`\n  padding: 4px 0;\n`;\n\nconst StyledQrCode = styled.img`\n  width: 100%;\n`;\n\nconst Actions = styled.div`\n  margin-top: 16px;\n  display: flex;\n  justify-content: center;\n`;\n","export default __webpack_public_path__ + \"static/media/qrOverlay.185cc3ea.svg\";","import jsQR, { QRCode } from \"jsqr\";\nimport { useCallback } from \"react\";\n\nimport { MediaStream } from \"./MediaStream\";\n\ntype Props = {\n  onDecode: (code: QRCode) => void;\n};\n\nexport const QRCodeReader = ({ onDecode }: Props) => {\n  const handleFrame = useCallback(\n    (imageData: ImageData) => {\n      const code = jsQR(imageData.data, imageData.width, imageData.height, {\n        inversionAttempts: \"dontInvert\",\n      });\n      code && onDecode(code);\n    },\n    [onDecode]\n  );\n\n  return <MediaStream onFrame={handleFrame} />;\n};\n","import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { getVenueName } from \"../../utils/qr\";\nimport qrOverlay from \"../../assets/qrOverlay.svg\";\nimport { QRCodeReader } from \"../../components/QRCodeReader\";\nimport { QRCode } from \"jsqr\";\nimport { isEmpty } from \"ramda\";\nimport { Header } from \"../../components/Header\";\n\nexport const QRReader = () => {\n  const browserHistory = useHistory();\n\n  const handleScan = ({ data }: QRCode) => {\n    if (!data || isEmpty(data)) return;\n    const place = getVenueName(data);\n    if (isEmpty(place)) return;\n    browserHistory.push({ pathname: \"/confirm\", search: `?place=${place}` });\n  };\n\n  return (\n    <PageWrapper>\n      <Header backPath=\"/\" name=\"掃瞄二維碼\" />\n      <Message>掃瞄二維碼</Message>\n      <VideoContainer>\n        <Overlay />\n        <QRCodeReader onDecode={handleScan} />\n      </VideoContainer>\n    </PageWrapper>\n  );\n};\n\nconst PageWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n  display: flex;\n  flex-direction: column;\n`;\n\nconst VideoContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  position: relative;\n`;\n\nconst Overlay = styled.div`\n  /* The image used */\n  background-image: url(\"${qrOverlay}\");\n\n  /* Full height */\n  height: 100%;\n\n  /* Center and scale the image nicely */\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n\n  z-index: 50;\n  position: relative;\n`;\n\nconst Message = styled.div`\n  position: absolute;\n  z-index: 51;\n  bottom: 20%;\n  width: 100%;\n  text-align: center;\n  color: #ffffff;\n  font-size: 16px;\n`;\n","export default __webpack_public_path__ + \"static/media/bg.80d5f5e2.png\";","export default __webpack_public_path__ + \"static/media/bar.8d9e0584.png\";","import { isEmpty, trim } from \"ramda\";\nimport React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { ConfirmButton } from \"../../components/Button\";\nimport { Place } from \"../../components/Place\";\nimport { useCamera } from \"../../hooks/useCamera\";\nimport bg from '../../assets/bg.png'\nimport bar from '../../assets/bar.png'\nimport moment from 'moment';\nimport 'moment/locale/zh-hk';\n\n\nexport const Welcome = () => {\n  const { hasCameraSupport } = useCamera();\n  const [place, setPlace] = useState(\"\");\n\n  const onClick = () => {\n    window.open(\"/#/qrReader\");\n  }\n\n  return (\n    <PageWrapper>\n      <div style={styles.container}>\n        <div style={styles.spacer} />\n        <text style={styles.dateText}> {moment().locale('zh').format('YYYY-MM-DD, dddd')}</text>\n        <div style={styles.updateContainer}>\n          {hasCameraSupport && (\n            <Link to={\"/qrReader\"}>\n              <img style={styles.fullWidth} src={bg} id={'bg'} alt={'bg'} />\n            </Link>\n          )}\n          <text style={styles.updateText} id={'update'}> {`最後更新${moment().locale('zh').format('YYYY-MM-DD')}`}</text>\n        </div>\n        <div style={styles.whiteSpacer} />\n        <img style={styles.fullWidth} src={bar} id={'bar'} alt={'bar'} />\n      </div>\n    </PageWrapper>\n  );\n};\n\nconst PageWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n  display: flex;\n  flex-direction: column;\n`;\n\ninterface StyleSheet {\n  [key: string]: React.CSSProperties;\n}\nconst styles: StyleSheet = {\n  container: {\n    height: 'inherit',\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  spacer: {\n    height: 16\n  },\n  dateText: {\n    marginLeft: 85 / 1079 * window.innerWidth,\n    color: 'white',\n    fontFamily: 'sans-serif',\n    textShadow: '1px 1px #555555'\n  },\n  updateContainer: {\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  updateText: {\n    position: 'relative',\n    left: 130 / 1079 * window.innerWidth,\n    bottom: 450 / 1079 * window.innerWidth,\n    fontSize: 12,\n    textShadow: 'none'\n  },\n  whiteSpacer: {\n    marginTop: -20,\n    flex: 1,\n    display: 'flex',\n    backgroundColor: 'white'\n  },\n  fullWidth: {\n    width: '100%'\n  }\n}","import { disableBodyScroll } from \"body-scroll-lock\";\nimport 'moment/locale/zh-hk';\nimport React, { useEffect, useState } from \"react\";\nimport { HashRouter, Redirect, Route } from \"react-router-dom\";\nimport { createGlobalStyle } from \"styled-components\";\nimport adapter from \"webrtc-adapter\";\nimport { AnimatedSwitch } from \"./components/AnimatedSwitch\";\nimport { CameraSetting } from \"./containers/CameraSetting\";\nimport { Confirm } from \"./containers/Confirm\";\nimport { QRGenerator } from \"./containers/QRGeneartor\";\nimport { QRReader } from \"./containers/QRReader\";\nimport { Welcome } from \"./containers/Welcome\";\nimport { useCamera } from \"./hooks/useCamera\";\nimport { checkPwaInstalled } from \"./utils/appCheck\";\n\n\nfunction App() {\n  const { hasCameraSupport } = useCamera();\n  const [showPWAPrompt, setShowPWAPrompt] = useState(!checkPwaInstalled());\n\n  useEffect(() => {\n    console.log(adapter.browserDetails.browser, adapter.browserDetails.version);\n  }, []);\n\n  useEffect(() => {\n    const root = document.querySelector(\"#root\");\n    if (!root) return;\n    disableBodyScroll(root);\n  }, []);\n\n\n  return (\n    <>\n      <GlobalStyle />\n      <HashRouter basename=\"/\">\n        <AnimatedSwitch>\n          <Route exact path=\"/\">\n            <Welcome />\n          </Route>\n          <Route exact path=\"/qrGenerator\">\n            <QRGenerator />\n          </Route>\n          <Route exact path=\"/confirm\">\n            <Confirm />\n          </Route>\n          {hasCameraSupport && (\n            <Route exact path=\"/qrReader\">\n              <QRReader />\n            </Route>\n          )}\n          {hasCameraSupport && (\n            <Route exact path=\"/cameraSetting\">\n              <CameraSetting />\n            </Route>\n          )}\n          <Redirect to=\"/\" />\n        </AnimatedSwitch>\n      </HashRouter>\n    </>\n  );\n}\n\nexport default App;\n\nconst GlobalStyle = createGlobalStyle`\nhtml {\n  width: 100%;\n  height: 100%;\n}\n\nbody {\n  margin: 0;\n  font-family: Rubik, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  background-color:#12b188;\n  width: 100%;\n  height: 100%;\n}\n\ntextarea {\n  font-family: inherit;\n}\n\n\n#root {\n  width: 100%;\n  height: 100%;\n}\n\na {\n  text-decoration: none;\n}\n`;","export const checkPwaInstalled = () => {\n  const isInstalled =\n    window.matchMedia(\"(display-mode: standalone)\").matches ||\n    /\\bmode=standalone\\b/.test(window.location.hash) ||\n    window.location.hostname === \"localhost\";\n\n  return isInstalled;\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://cra.link/PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://cra.link/PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport { UseCameraProvider } from \"./hooks/useCamera\";\nimport * as serviceWorkerRegistration from \"./serviceWorkerRegistration\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <UseCameraProvider>\n      <App />\n    </UseCameraProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.register();\n"],"sourceRoot":""}