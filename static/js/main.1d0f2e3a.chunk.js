(this["webpackJsonpback-home-safe"]=this["webpackJsonpback-home-safe"]||[]).push([[0],{188:function(e,n,t){"use strict";t.r(n);var a,i,c,r,o,s,d,l,b,j,h,u,x,p,f,O,g,m,v,w,y,k,C,S,I,E,D,M,z,H,A,R,U,Z,L,W,T,Y,q,F,N,P,B,K,J,_,G,Q,V,X,$,ee,ne,te,ae,ie,ce,re,oe,se,de,le,be,je,he,ue,xe,pe,fe,Oe,ge,me,ve,we,ye=t(0),ke=t.n(ye),Ce=t(13),Se=t.n(Ce),Ie=t(3),Ee=t(15),De=t(50),Me=(t(89),t(25)),ze=t(11),He=t(4),Ae=t(82),Re=t(58),Ue=t(78),Ze=t(2),Le=function(e){return Object(Ze.jsx)(We,Object(Re.a)(Object(Re.a)({},e),{},{atEnter:{opacity:1,offset:100,zIndex:100},atLeave:{opacity:0,offset:0},atActive:{opacity:1,offset:(n=0,Object(Ue.b)(n,{stiffness:174,damping:24}))},mapStyles:function(e){return{opacity:e.opacity,zIndex:e.zIndex,transform:"translateX(".concat(e.offset,"%)")}}}));var n},We=Object(He.b)(Ue.a)(a||(a=Object(Ie.a)(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n\n  & > div {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background-color: #13b088;\n    box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n  }\n"]))),Te=t(242),Ye=t(235),qe=t(244),Fe=t(229),Ne=t(228),Pe=t(236),Be=t.p+"static/media/back.7bf7a56f.svg",Ke=function(e){var n=e.name,t=e.backPath;return Object(Ze.jsxs)(_e,{children:[Object(Ze.jsx)(Me.b,{to:t,children:Object(Ze.jsx)(Je,{src:Be})}),Object(Ze.jsx)("text",{style:{fontSize:20},children:n})]})},Je=He.b.img(i||(i=Object(Ie.a)(["\n  height: 20px;\n  top: 14px;\n  left: 16px;\n  position: absolute;\n"]))),_e=He.b.div(c||(c=Object(Ie.a)(["\n  color: #ffffff;\n  background-color: #13b088;\n  text-align: center;\n  line-height: 48px;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n  flex-shrink: 0;\n  font-size: 20;\n"]))),Ge=t(32),Qe=t.n(Ge),Ve=t(51),Xe=t(222),$e=t(65),en=function(){var e=Object(Ve.a)(Qe.a.mark((function e(n){return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("mediaDevices"in navigator)){e.next=12;break}return e.prev=1,e.abrupt("return",navigator.mediaDevices.getUserMedia({video:n?{deviceId:n}:{facingMode:"environment"},audio:!1}));case 5:return e.prev=5,e.t0=e.catch(1),alert("\u672a\u80fd\u958b\u555f\u76f8\u6a5f\u93e1\u982d\uff0c\u8acb\u5230\u76f8\u6a5f\u8a2d\u5b9a\u9032\u884c\u8a2d\u7f6e"),console.log(e.t0),e.abrupt("return",null);case 10:e.next=14;break;case 12:return alert($e.isIOS?"getUserMedia is not implemented in this browser, \u8acb\u78ba\u4fdd\u88dd\u7f6e\u5728IOS 14\u6216\u4ee5\u4e0a":"getUserMedia is not implemented in this browser"),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[1,5]])})));return function(n){return e.apply(this,arguments)}}(),nn=t(221),tn=t(237),an=t(239),cn=t(103),rn=Object(cn.a)((function(){var e=Object(ye.useState)("mediaDevices"in navigator),n=Object(Ee.a)(e,1)[0],t=Object(an.a)("preferred_camera_id","AUTO"),a=Object(Ee.a)(t,2),i=a[0],c=a[1],r=Object(ye.useState)(null),o=Object(Ee.a)(r,2),s=o[0],d=o[1],l=Object(ye.useCallback)(Object(Ve.a)(Qe.a.mark((function e(){var t,a;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n&&Object(nn.a)("enumerateDevices",navigator.mediaDevices)){e.next=4;break}return d([]),e.abrupt("return");case 4:return e.next=6,navigator.mediaDevices.enumerateDevices();case 6:t=e.sent,a=t.filter((function(e){return"videoinput"===e.kind})),d(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),alert("Unable to list device.\n\n"+e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),[n]);return Object(ye.useEffect)((function(){l()}),[n,l]),Object(ye.useEffect)((function(){null===s||"AUTO"===i||Object(tn.a)((function(e){return e.deviceId===i}),s)||c("AUTO")}),[s,c,i]),{cameraId:Object(tn.a)((function(e){return e.deviceId===i}),s||[])?i:"AUTO",cameraList:s||[],setCameraId:c,hasCameraSupport:n}})),on=Object(Ee.a)(rn,2),sn=on[0],dn=on[1],ln=function(e){var n=e.onFrame,t=dn().cameraId,a=Object(ye.useRef)(null),i=Object(ye.useRef)(null),c=Object(Xe.a)((function(){var e=i.current,t=a.current;if(e&&t&&t.readyState===t.HAVE_ENOUGH_DATA){var c=e.getContext("2d");if(!c)return;e.height=t.videoHeight,e.width=t.videoWidth,c.drawImage(t,0,0,e.width,e.height);var r=c.getImageData(0,0,e.width,e.height);n&&n(r)}}),!1),r=Object(Ee.a)(c,2),o=r[0],s=r[1],d=Object(ye.useCallback)(Object(Ve.a)(Qe.a.mark((function e(){var n,i;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.current){e.next=3;break}return e.abrupt("return");case 3:return console.log("cameraId",t),e.next=6,en("AUTO"===t?void 0:t);case 6:if(i=e.sent){e.next=9;break}return e.abrupt("return");case 9:n.srcObject=i,n.play(),s();case 12:case"end":return e.stop()}}),e)}))),[s,t]);return Object(ye.useEffect)((function(){var e=a.current;return d(),function(){if(o(),e){var n=e.srcObject;if(!n)return;n.getTracks().forEach((function(e){e.stop()})),e.srcObject=null}}}),[s,o,a,d,t]),Object(Ze.jsxs)(Ze.Fragment,{children:[Object(Ze.jsx)(bn,{ref:a,playsInline:!0}),Object(Ze.jsx)(jn,{ref:i})]})},bn=He.b.video(r||(r=Object(Ie.a)(["\n  /* Make video to at least 100% wide and tall */\n  min-width: 100%;\n  min-height: 100%;\n\n  /* Setting width & height to auto prevents the browser from stretching or squishing the video */\n  width: auto;\n  height: auto;\n\n  /* Center the video */\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n"]))),jn=He.b.canvas(o||(o=Object(Ie.a)(["\n  display: none;\n"]))),hn=function(){var e=dn(),n=e.cameraId,t=e.setCameraId,a=e.cameraList;return Object(Ze.jsxs)(un,{children:[Object(Ze.jsx)(Ke,{backPath:"/",name:"\u76f8\u6a5f\u8a2d\u5b9a"}),Object(Ze.jsx)(pn,{children:Object(Ze.jsxs)(fn,{children:[Object(Ze.jsx)(Te.a,{id:"cameraId",children:"\u76f8\u6a5f\u9078\u64c7"}),Object(Ze.jsxs)(Ye.a,{labelId:"cameraId",id:"demo-simple-select",value:n,onChange:function(e){t(e.target.value||"AUTO")},children:[Object(Ze.jsx)(qe.a,{value:"AUTO",children:"\u81ea\u52d5"}),a.map((function(e){var n=e.deviceId,t=e.label;return Object(Ze.jsx)(qe.a,{value:n,children:Object(Ne.a)(t)||Object(Pe.a)(t)?n:t},"deviceId")}))]})]})}),Object(Ze.jsx)(xn,{children:Object(Ze.jsx)(ln,{})})]})},un=He.b.div(s||(s=Object(Ie.a)(["\n  width: 100%;\n  height: 100%;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n  display: flex;\n  flex-direction: column;\n  background-color: #fff;\n"]))),xn=He.b.div(d||(d=Object(Ie.a)(["\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  position: relative;\n"]))),pn=He.b.div(l||(l=Object(Ie.a)(["\n  width: 100%;\n  display: flex;\n"]))),fn=Object(He.b)(Fe.a)(b||(b=Object(Ie.a)(["\n  width: 100%;\n\n  &.MuiFormControl-root {\n    margin: 8px;\n  }\n"]))),On=t.p+"static/media/cross.d2bbc7f7.svg",gn=t.p+"static/media/tick.6d45b966.svg",mn=He.b.button(j||(j=Object(Ie.a)(["\n  display: block;\n  margin: auto;\n  margin-bottom: 16px;\n  font-size: 24px;\n  padding: 10px 0;\n  width: 80%;\n  border-radius: 48px;\n  flex-shrink: 0;\n  max-width: 280px;\n  font-weight: 500;\n\n  ","\n\n  border: 0;\n  outline: none;\n  ","\n\n  &:focus {\n    outline: none;\n    text-decoration: none;\n  }\n"])),(function(e){return e.disabled?"background-color: #D3D3D3;\n        color: #A1A1A1;\n        ":"\n        background-color: #fed426;\n        color: #000000;\n      "}),(function(e){return e.shadowed?"box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.5);":""})),vn=Object(He.b)(mn)(h||(h=Object(Ie.a)(["\n  font-size: 16px;\n  padding: 12px 0;\n  width: 90%;\n  font-weight: unset;\n"]))),wn=t(112),yn=t(107),kn=t.n(yn),Cn=function(e){var n=e.value,t=e.onChange,a=e.placeholder,i=e.readOnly,c=Object(wn.a)(e,["value","onChange","placeholder","readOnly"]);return Object(Ze.jsx)(Sn,Object(Re.a)({value:n,placeholder:a,readOnly:i,onChange:function(e){t&&t(e.target.value)},async:!0},c))},Sn=Object(He.b)(kn.a)(u||(u=Object(Ie.a)(["\n  text-align: center;\n  font-size: 32px;\n  background-color: transparent;\n  border: 0;\n  outline: none;\n  margin: 4px 0;\n  color: #fed426;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n  width: 100%;\n\n  padding-left: 0;\n  padding-right: 0;\n  line-height: 36px;\n  font-weight: 500;\n\n  &:focus {\n    outline: none;\n  }\n"]))),In=t(53),En=t.n(In),Dn=t.p+"static/media/crossBlack.aafc0aee.svg",Mn=t.p+"static/media/greenTick.2e9be05d.svg",zn=function(e){var n=e.isModalOpen,t=e.onCancel,a=e.onConfirm,i=e.selectedAutoLeaveHour,c=e.date,r=Object(ye.useState)(i),o=Object(Ee.a)(r,2),s=o[0],d=o[1];Object(ye.useEffect)((function(){d(i)}),[d,i]);var l=Object(ye.useMemo)((function(){return c.add(s,"hour")}),[c,s]);return Object(Ze.jsxs)(En.a,{isOpen:n,onRequestClose:t,style:{overlay:{backgroundColor:"rgba(0, 0, 0, 0.5)"},content:{outline:"none",border:"0",padding:"16px",borderRadius:"8px",width:"240px",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",height:"370px",overflow:"hidden"}},ariaHideApp:!1,onAfterOpen:function(){var e=document.querySelector("#scroll");e&&Object(De.a)(e)},children:[Object(Ze.jsx)(An,{children:Object(Ze.jsx)(Hn,{src:Dn,onClick:t})}),Object(Ze.jsx)(Rn,{children:"\u8a2d\u7f5d\u81ea\u52d5\u96e2\u958b\u6642\u9593"}),Object(Ze.jsx)(Un,{id:"scroll",children:Object(Ze.jsx)(Zn,{children:[1,2,3,4,5,6,7,8,9,10].map((function(e){return Object(Ze.jsxs)(Ln,{onClick:function(){d(e)},children:["+ ",e,"\u5c0f\u6642",s===e&&Object(Ze.jsx)(Tn,{src:Mn})]},e)}))})}),Object(Ze.jsxs)(Wn,{children:[Object(Ze.jsxs)("div",{children:["\u65bc",c.format("MM-DD HH:mm")," \u9032\u5165\u5834\u6240"]}),Object(Ze.jsxs)("div",{children:["\u65bc",l.format("MM-DD HH:mm")," \u81ea\u52d5\u96e2\u958b"]})]}),Object(Ze.jsx)(vn,{onClick:function(){a(s)},children:"\u78ba\u8a8d"})]})},Hn=He.b.img(x||(x=Object(Ie.a)(["\n  height: 20px;\n"]))),An=He.b.div(p||(p=Object(Ie.a)(["\n  display: flex;\n  width: 100%;\n  justify-content: flex-end;\n"]))),Rn=He.b.h1(f||(f=Object(Ie.a)(["\n  font-size: 20px;\n  text-align: center;\n  margin-top: 20px;\n  margin-bottom: 0;\n"]))),Un=He.b.div(O||(O=Object(Ie.a)(["\n  overflow: auto;\n  height: 180px;\n  padding: 0 8px;\n"]))),Zn=He.b.ul(g||(g=Object(Ie.a)(["\n  list-style: none;\n  margin: 0;\n  padding: 0;\n"]))),Ln=He.b.li(m||(m=Object(Ie.a)(["\n  line-height: 40px;\n  border-bottom: 1px #eeeeee solid;\n  padding: 0 8px;\n"]))),Wn=He.b.div(v||(v=Object(Ie.a)(["\n  font-size: 12px;\n  text-align: center;\n  padding: 16px 0;\n"]))),Tn=He.b.img(w||(w=Object(Ie.a)(["\n  height: 32px;\n  position: relative;\n  float: right;\n  top: 4px;\n"]))),Yn=function(e){var n=e.isModalOpen,t=e.onCancel,a=e.onLeaveNow,i=e.onLeaved,c=e.place,r=e.date,o=e.autoLeaveHour,s=0!==o,d=Object(ye.useMemo)((function(){return r.add(o,"hour")}),[r,o]);return Object(Ze.jsxs)(En.a,{isOpen:n,onRequestClose:t,style:{overlay:{backgroundColor:"rgba(0, 0, 0, 0.5)"},content:{outline:"none",border:"0",padding:"16px",borderRadius:"8px",width:"240px",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",height:s?"430px":"390px",overflow:"hidden"}},ariaHideApp:!1,children:[Object(Ze.jsx)(Fn,{children:Object(Ze.jsx)(qn,{src:Dn,onClick:t})}),Object(Ze.jsx)(Bn,{children:"\u4f60\u5df2\u9032\u5165\u5834\u6240"}),Object(Ze.jsx)(Jn,{children:c}),Object(Ze.jsx)(Kn,{children:r.format("YYYY-MM-DD HH:mm")}),Object(Ze.jsx)(Nn,{children:"\u4f60\u73fe\u5728\u8981\u96e2\u958b\u55ce\uff1f"}),s&&Object(Ze.jsxs)(_n,{children:["\u65bc",d.format("MM-DD HH:mm")," \u81ea\u52d5\u96e2\u958b"]}),Object(Ze.jsx)(vn,{onClick:a,children:"\u662f\u7684\uff0c\u6211\u73fe\u5728\u8981\u96e2\u958b"}),Object(Ze.jsx)(Pn,{onClick:i,children:"\u6211\u73fe\u5df2\u7d93\u96e2\u958b\u4e86"})]})},qn=He.b.img(y||(y=Object(Ie.a)(["\n  height: 20px;\n"]))),Fn=He.b.div(k||(k=Object(Ie.a)(["\n  display: flex;\n  width: 100%;\n  justify-content: flex-end;\n  margin-bottom: 8px;\n"]))),Nn=He.b.div(C||(C=Object(Ie.a)(["\n  font-size: 20px;\n  text-align: center;\n  margin: 64px 0;\n  font-weight: 500;\n"]))),Pn=Object(He.b)(vn)(S||(S=Object(Ie.a)(["\n  background-color: #13b088;\n  color: #fff;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n"]))),Bn=He.b.div(I||(I=Object(Ie.a)(["\n  text-align: center;\n  font-size: 16px;\n"]))),Kn=He.b.div(E||(E=Object(Ie.a)(["\n  text-align: center;\n  font-size: 14px;\n"]))),Jn=He.b.div(D||(D=Object(Ie.a)(["\n  color: unset;\n  text-shadow: none;\n  text-align: center;\n  font-size: 28px;\n  font-weight: 500;\n  line-height: 48px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n"]))),_n=He.b.div(M||(M=Object(Ie.a)(["\n  font-size: 12px;\n  text-align: center;\n  padding: 12px 0;\n"]))),Gn=t(108),Qn=t.n(Gn),Vn=(t(157),Object(ye.forwardRef)((function(e,n){return Object(ye.useImperativeHandle)(n,(function(){return{init:function(){var e=document.querySelector(".js-inline-picker");e&&new Qn.a(e,{inline:!0,rows:2})}}})),Object(Ze.jsx)(Xn,{children:Object(Ze.jsx)("div",{className:"js-inline-picker"})})}))),Xn=He.b.div(z||(z=Object(Ie.a)(["\n  & .picker {\n    font-size: 12px;\n  }\n\n  & .picker-dialog {\n    border: 0;\n  }\n\n  & .picker-cell:before {\n    background-image: unset;\n  }\n\n  & .picker-cell:after {\n    background-image: unset;\n  }\n\n  & .picker-picked {\n    color: unset;\n    border-top: #13b088 1px solid;\n    border-bottom: #13b088 1px solid;\n  }\n\n  & .picker-cell {\n    padding: 0 4px;\n  }\n\n  & .picker-item {\n    padding: 3px 0px;\n  }\n\n  & .picker-cell + .picker-cell {\n    border: 0;\n  }\n"]))),$n=function(e){var n=e.isModalOpen,t=e.onCancel,a=e.onConfirm,i=Object(ye.useRef)(null);return Object(Ze.jsxs)(En.a,{isOpen:n,onRequestClose:t,style:{overlay:{backgroundColor:"rgba(0, 0, 0, 0.5)"},content:{outline:"none",border:"0",padding:"16px",borderRadius:"8px",width:"240px",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",height:"280px",overflow:"hidden"}},ariaHideApp:!1,onAfterOpen:function(){i.current&&i.current.init()},children:[Object(Ze.jsx)(nt,{children:Object(Ze.jsx)(et,{src:Dn,onClick:t})}),Object(Ze.jsx)(tt,{children:"\u4f60\u662f\u4ec0\u9ebc\u6642\u5019\u96e2\u958b\uff1f"}),Object(Ze.jsx)(at,{children:Object(Ze.jsx)(Vn,{ref:i})}),Object(Ze.jsx)(vn,{onClick:a,children:"\u78ba\u8a8d"})]})},et=He.b.img(H||(H=Object(Ie.a)(["\n  height: 20px;\n"]))),nt=He.b.div(A||(A=Object(Ie.a)(["\n  display: flex;\n  width: 100%;\n  justify-content: flex-end;\n"]))),tt=He.b.div(R||(R=Object(Ie.a)(["\n  font-size: 20px;\n  text-align: center;\n  margin-top: 24px;\n"]))),at=He.b.div(U||(U=Object(Ie.a)(["\n  border-bottom: 1px #eeeeee solid;\n  border-top: 1px #eeeeee solid;\n  padding: 32px 0;\n  margin: 16px 0;\n"]))),it=t(230),ct=t.p+"static/media/checkbox.4e2450ab.svg",rt=t.p+"static/media/checkboxChecked.7f6c2da0.svg",ot=t(238),st=function(e){var n=e.onChange,t=e.checked,a=function(){n(!t)};return $e.isAndroid?Object(Ze.jsx)(lt,{checked:t,onClick:a,color:"primary"}):Object(Ze.jsx)(dt,{src:t?rt:ct,onClick:a})},dt=He.b.img(Z||(Z=Object(Ie.a)(["\n  height: 16px;\n  display: inline-block;\n  vertical-align: top;\n  margin: 0 8px;\n  margin-top: 8px;\n"]))),lt=Object(He.b)(ot.a)(L||(L=Object(Ie.a)(["\n  display: inline-block;\n  vertical-align: top;\n  margin: 0 8px !important;\n  padding: 0 !important;\n\n  &.MuiCheckbox-colorPrimary {\n    color: #fff !important;\n  }\n"]))),bt=t(109),jt=t.n(bt),ht=t.p+"static/media/icon.61ed31dc.png",ut=function(){var e=Object(ze.g)(),n=Object(ze.h)(),t=Object(ye.useState)(!0),a=Object(Ee.a)(t,2),i=a[0],c=a[1],r=Object(ye.useState)(4),o=Object(Ee.a)(r,2),s=o[0],d=o[1],l=Object(ye.useState)(!1),b=Object(Ee.a)(l,2),j=b[0],h=b[1],u=Object(ye.useState)(!1),x=Object(Ee.a)(u,2),p=x[0],f=x[1],O=Object(ye.useState)(!1),g=Object(Ee.a)(O,2),m=g[0],v=g[1],w=Object(ye.useMemo)((function(){return Object(it.a)(new URLSearchParams(n.search).get("place")||"")}),[n.search]);Object(ye.useEffect)((function(){}),[e,w]);var y=Object(ye.useMemo)((function(){return jt()()}),[]),k=function(){h(!1),f(!1),v(!1),e.push("/")};return Object(Ze.jsxs)(Ze.Fragment,{children:[Object(Ze.jsxs)(xt,{children:[Object(Ze.jsx)("img",{style:{position:"absolute",top:10,left:window.innerWidth/2-50,width:100,height:100},src:ht}),Object(Ze.jsx)(pt,{children:Object(Ze.jsx)(Me.b,{to:"/",children:Object(Ze.jsx)(ft,{src:On})})}),Object(Ze.jsxs)(gt,{children:[Object(Ze.jsx)(yt,{children:"\u4f60\u5df2\u9032\u5165\u5834\u6240"}),Object(Ze.jsx)(Ot,{children:Object(Ze.jsx)(Cn,{value:w||"",readOnly:!0})}),Object(Ze.jsx)(kt,{children:y.format("YYYY-MM-DD HH:mm")})]}),Object(Ze.jsx)(mt,{children:Object(Ze.jsx)(vt,{children:Object(Ze.jsx)(wt,{src:gn})})}),Object(Ze.jsx)("div",{style:{flex:1}}),Object(Ze.jsxs)(Dt,{children:[Object(Ze.jsx)(mn,{shadowed:!0,onClick:function(){f(!0)},children:"\u96e2\u958b\u57f8\u6240"}),Object(Ze.jsx)(Et,{children:'\u7576\u4f60\u96e2\u958b\u6642\u8acb\u7dca\u8a18\u6309"\u96e2\u958b"'}),Object(Ze.jsxs)(Ct,{children:[Object(Ze.jsxs)(St,{children:[Object(Ze.jsx)(st,{checked:i,onChange:c}),s,"\u5c0f\u6642\u5f8c\u81ea\u52d5\u96e2\u958b"]}),Object(Ze.jsx)(It,{onClick:function(){h(!0)},children:"\u8b8a\u66f4"})]})]})]}),Object(Ze.jsx)(zn,{isModalOpen:j,onCancel:function(){h(!1)},onConfirm:function(e){d(e),h(!1)},selectedAutoLeaveHour:s,date:y}),Object(Ze.jsx)(Yn,{isModalOpen:p,onCancel:function(){f(!1)},onLeaveNow:k,onLeaved:function(){f(!1),v(!0)},place:w||"",date:y,autoLeaveHour:i?s:0}),Object(Ze.jsx)($n,{isModalOpen:m,onCancel:function(){v(!1)},onConfirm:k})]})},xt=He.b.div(W||(W=Object(Ie.a)(["\n  width: 100%;\n  height: 100%;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n  display: flex;\n  flex-direction: column;\n  color: #fff;\n"]))),pt=He.b.div(T||(T=Object(Ie.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: flex-end;\n  flex-shrink: 0;\n"]))),ft=He.b.img(Y||(Y=Object(Ie.a)(["\n  height: 20px;\n  margin: 24px;\n"]))),Ot=He.b.div(q||(q=Object(Ie.a)(["\n  padding: 0 32px;\n"]))),gt=He.b.div(F||(F=Object(Ie.a)(["\n  width: 100%;\n  height: 50%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]))),mt=He.b.div(N||(N=Object(Ie.a)(["\n  height: 100%;\n  width: 100%;\n  text-align: center;\n"]))),vt=He.b.div(P||(P=Object(Ie.a)(["\n  height: 100%;\n  max-height: 200px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]))),wt=He.b.img(B||(B=Object(Ie.a)(["\n  display: inline-block;\n  height: 100%;\n  max-height: 110px;\n"]))),yt=He.b.div(K||(K=Object(Ie.a)(["\n  color: #ffffff;\n  text-align: center;\n  font-size: 15px;\n"]))),kt=He.b.div(J||(J=Object(Ie.a)(["\n  color: #ffffff;\n  text-align: center;\n"]))),Ct=He.b.div(_||(_=Object(Ie.a)(["\n  margin-bottom: 16px;\n  width: 100%;\n  max-width: 380px;\n  margin: 16px auto;\n  display: flex;\n  flex-shrink: 0;\n  font-size: 14px;\n"]))),St=He.b.div(G||(G=Object(Ie.a)(["\n  width: 100%;\n  text-align: left;\n  padding-left: 24px;\n  line-height: 32px;\n  align-item: center;\n  display: flex;\n"]))),It=He.b.div(Q||(Q=Object(Ie.a)(["\n  flex-shrink: 0;\n  padding-right: 24px;\n  line-height: 32px;\n  color: yellow;\n  text-decoration: underline;\n  text-shadow: none\n"]))),Et=He.b.div(V||(V=Object(Ie.a)(["\n  text-align: center;\n  // padding-bottom: 16px;\n  flex-shrink: 0;\n"]))),Dt=He.b.div(X||(X=Object(Ie.a)(["\n  width: 100%;\n  flex-shrink: 0;\n"]))),Mt=t(232),zt=t(233),Ht=t(190),At=t(234),Rt=t(245),Ut=t(231),Zt=t(240),Lt=t(110),Wt=function(e){if(!e.startsWith("HKEN:"))return"";var n=function(e){if(!e.startsWith("HKEN:"))return null;var n=e.substring(6,14),t=Tt(n),a=e.substring(14),i=JSON.parse(decodeURIComponent(escape(window.atob(a))));return console.log({input:e,venueId:n,decodedData:i,computedHash:t,hashMatch:t===i.hash}),i}(e);if(!n)return"";var t=n.nameZh?Object(it.a)(n.nameZh):"";return Object(Pe.a)(t)?n.nameEn:t},Tt=function(e){var n="HKEN".concat(e,"2020");return Object(Lt.sha256)(n)},Yt=function(e){var n=e.typeEn,t=e.typeZh,a=e.nameEn,i=e.nameZh,c=e.type,r=e.venueCode,o=e.venueID,s={metadata:Object(Pe.a)(n)&&Object(Pe.a)(t)?null:{typeEn:n,typeZh:t},nameZh:i,nameEn:a,type:c,hash:Tt(o)},d=window.btoa(unescape(encodeURIComponent(JSON.stringify(s))));return"HKEN:".concat(r).concat(o).concat(d)},qt=t(70),Ft=t.p+"static/media/baseIcon.aa0e0793.png",Nt=t(241),Pt=t(81),Bt=t.n(Pt),Kt=function(e){var n=e.data,t=e.onLeave,a=Object(ye.useRef)(null);return Object(ye.useEffect)((function(){if(a.current){var e=Yt(n);new qt.a({image:a.current,content:e,width:380,logo:{src:n.customImg||Ft,logoRadius:8,borderSize:0}}).toImage()}}),[n]),n?Object(Ze.jsxs)(Jt,{children:[Object(Ze.jsx)(_t,{children:Object(Ze.jsx)(Gt,{src:On,onClick:t})}),Object(Ze.jsx)(Xt,{children:Object(Ze.jsxs)(Vt,{children:[n.nameEn&&!Object(Pe.a)(n.nameZh)&&Object(Ze.jsx)(Qt,{value:n.nameZh||"",readOnly:!0}),n.nameEn&&!Object(Pe.a)(n.nameEn)&&Object(Ze.jsx)(Qt,{value:n.nameEn||"",readOnly:!0})]})}),Object(Ze.jsx)($t,{children:Object(Ze.jsx)(ea,{children:Object(Ze.jsx)(na,{ref:a,alt:"qrCode"})})}),Object(Ze.jsxs)(ta,{children:[n.addressZh&&!Object(Pe.a)(n.addressZh)&&Object(Ze.jsx)("div",{children:n.addressZh}),n.addressEn&&!Object(Pe.a)(n.addressEn)&&Object(Ze.jsx)("div",{children:n.addressEn})]})]}):Object(Ze.jsx)(Ze.Fragment,{})},Jt=He.b.div($||($=Object(Ie.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  color: #fff;\n  background-color: #13b088;\n  position: absolute;\n"]))),_t=He.b.div(ee||(ee=Object(Ie.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: flex-end;\n  flex-shrink: 0;\n"]))),Gt=He.b.img(ne||(ne=Object(Ie.a)(["\n  height: 20px;\n  margin: 24px;\n"]))),Qt=Object(He.b)(Cn)(te||(te=Object(Ie.a)(["\n  font-size: 20px;\n  line-height: 20px;\n  text-shadow: none;\n"]))),Vt=He.b.div(ae||(ae=Object(Ie.a)(["\n  padding: 0 32px;\n"]))),Xt=He.b.div(ie||(ie=Object(Ie.a)(["\n  width: 100%;\n  height: 50%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]))),$t=He.b.div(ce||(ce=Object(Ie.a)(["\n  height: 100%;\n  width: 100%;\n  text-align: center;\n"]))),ea=He.b.div(re||(re=Object(Ie.a)(["\n  height: 100%;\n  max-height: 280px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]))),na=He.b.img(oe||(oe=Object(Ie.a)(["\n  display: inline-block;\n  height: 100%;\n  max-height: 300px;\n  margin: 0 auto;\n"]))),ta=He.b.div(se||(se=Object(Ie.a)(["\n  width: 100%;\n  height: 50%;\n  text-align: center;\n"]))),aa=function(){var e=Object(ye.useRef)(null),n=ke.a.useRef(null),t=Object(ye.useState)(!1),a=Object(Ee.a)(t,2),i=a[0],c=a[1],r=Object(ye.useState)(null),o=Object(Ee.a)(r,2),s=o[0],d=o[1],l=Object(Ut.a)({typeEn:"Stores/Shopping Malls",typeZh:"\u5546\u5e97/\u5546\u5834",nameEn:"CityWalk",nameZh:"\u8343\u65b0\u5929\u5730",type:"IMPORT",venueCode:"0",venueID:"WHBvLDSa",addressEn:"1 & 18 Yeung Uk Rd, Tsuen Wan, Hong Kong",addressZh:"\u8343\u7063\u694a\u5c4b\u90531\u865f",customImg:null}),b=Object(Ee.a)(l,2),j=b[0],h=b[1],u=1===j.venueCode.length,x=8===j.venueID.length,p=u&&x;Object(Zt.a)((function(){var e=document.querySelector("#scroll");e&&Object(De.a)(e)})),Object(ye.useEffect)((function(){if(e.current&&p){var n=Yt(j),t=new qt.a({image:e.current,content:n,width:380,logo:{src:j.customImg||Ft,logoRadius:8,borderSize:0}});t.toImage(),d(t)}}),[j,p]);return Object(Ze.jsxs)(ia,{children:[Object(Ze.jsx)(Ke,{backPath:"/",name:"\u751f\u6210\u4e8c\u7dad\u78bc"}),Object(Ze.jsxs)(ca,{id:"scroll",children:[Object(Ze.jsxs)(ra,{children:[Object(Ze.jsx)(oa,{label:"\u5834\u6240\u7a2e\u985e(\u4e2d\u6587) (typeZh)",value:j.typeZh,onChange:function(e){h({typeZh:e.target.value})}}),Object(Ze.jsx)(oa,{label:"\u5834\u6240\u7a2e\u985e(\u82f1\u6587) (typeEn)",value:j.typeEn,onChange:function(e){h({typeEn:e.target.value})}}),Object(Ze.jsx)(oa,{label:"\u5834\u6240\u540d\u5b57(\u4e2d\u6587) (nameZh)",value:j.nameZh,onChange:function(e){h({nameZh:e.target.value})}}),Object(Ze.jsx)(oa,{label:"\u5834\u6240\u540d\u5b57(\u82f1\u6587) (nameEn)",value:j.nameEn,onChange:function(e){h({nameEn:e.target.value})}}),Object(Ze.jsx)(oa,{label:"\u5834\u6240\u5730\u5740(\u4e2d\u6587) (\u9810\u89bd\u7528)",value:j.addressZh,onChange:function(e){h({addressZh:e.target.value})}}),Object(Ze.jsx)(oa,{label:"\u5834\u6240\u5730\u5740(\u82f1\u6587) (\u9810\u89bd\u7528)",value:j.addressEn,onChange:function(e){h({addressEn:e.target.value})}}),Object(Ze.jsx)(oa,{label:"\u985e\u578b",value:j.type,onChange:function(e){h({type:e.target.value})}}),Object(Ze.jsx)(oa,{label:"\u5834\u5730\u7de8\u78bc (\u5514\u77e5\u5514\u597d\u641e)",value:j.venueCode,onChange:function(e){h({venueCode:e.target.value})},error:!u,inputProps:{maxLength:1}}),Object(Ze.jsx)(oa,{label:"\u5834\u5730ID (\u5514\u77e5\u5514\u597d\u641e)",value:j.venueID,onChange:function(e){h({venueID:e.target.value})},error:!x,inputProps:{maxLength:8}}),Object(Ze.jsxs)(sa,{children:[Object(Ze.jsx)("div",{children:"\u81ea\u5b9aIcon"}),Object(Ze.jsx)(da,{type:"file",name:"avatar",accept:"image/png, image/jpeg",ref:n,onChange:function(e){var n=Array.from(e.target.files||[]),t=Object(Nt.a)(n);if(t){var a=new FileReader;a.readAsDataURL(t),a.onload=function(){return h({customImg:String(a.result)})}}else h({customImg:null})}})]})]}),Object(Ze.jsx)(Mt.a,{}),Object(Ze.jsx)(ba,{children:Object(Ze.jsxs)(zt.a,{"aria-label":"outlined primary button group",children:[Object(Ze.jsx)(Ht.a,{variant:"contained",size:"small",startIcon:Object(Ze.jsx)(Bt.a,{}),onClick:function(){s&&s.downloadImage("QR Code")},disabled:!p,children:"\u5132\u5b58"}),Object(Ze.jsx)(Ht.a,{variant:"contained",size:"small",startIcon:Object(Ze.jsx)(Bt.a,{}),onClick:function(){c(!0)},disabled:!p,children:"\u9810\u89bd"})]})}),Object(Ze.jsx)(la,{ref:e,alt:"qrCode"})]}),i&&Object(Ze.jsx)(Kt,{data:j,onLeave:function(){c(!1)}})]})},ia=He.b.div(de||(de=Object(Ie.a)(["\n  width: 100%;\n  height: 100%;\n  background-color: #fff;\n  display: flex;\n  flex-direction: column;\n"]))),ca=He.b.div(le||(le=Object(Ie.a)(["\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n"]))),ra=Object(He.b)(At.a)(be||(be=Object(Ie.a)(["\n  padding: 8px 16px;\n"]))),oa=Object(He.b)(Rt.a)(je||(je=Object(Ie.a)(["\n  &.MuiFormControl-root {\n    margin-top: 8px;\n  }\n"]))),sa=He.b.div(he||(he=Object(Ie.a)(["\n  font-size: 12px;\n  padding: 4px 0;\n  color: rgba(0, 0, 0, 0.54);\n"]))),da=He.b.input(ue||(ue=Object(Ie.a)(["\n  padding: 4px 0;\n"]))),la=He.b.img(xe||(xe=Object(Ie.a)(["\n  width: 100%;\n"]))),ba=He.b.div(pe||(pe=Object(Ie.a)(["\n  margin-top: 16px;\n  display: flex;\n  justify-content: center;\n"]))),ja=t.p+"static/media/qrOverlay.185cc3ea.svg",ha=t(111),ua=t.n(ha),xa=function(e){var n=e.onDecode,t=Object(ye.useCallback)((function(e){var t=ua()(e.data,e.width,e.height,{inversionAttempts:"dontInvert"});t&&n(t)}),[n]);return Object(Ze.jsx)(ln,{onFrame:t})},pa=function(){var e=Object(ze.g)();return Object(Ze.jsxs)(fa,{children:[Object(Ze.jsx)(Ke,{backPath:"/",name:"\u6383\u7784\u4e8c\u7dad\u78bc"}),Object(Ze.jsx)(ma,{children:"\u6383\u7784\u4e8c\u7dad\u78bc"}),Object(Ze.jsxs)(Oa,{children:[Object(Ze.jsx)(ga,{}),Object(Ze.jsx)(xa,{onDecode:function(n){var t=n.data;if(t&&!Object(Pe.a)(t)){var a=Wt(t);Object(Pe.a)(a)||e.push({pathname:"/confirm",search:"?place=".concat(a)})}}})]})]})},fa=He.b.div(fe||(fe=Object(Ie.a)(["\n  width: 100%;\n  height: 100%;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n  display: flex;\n  flex-direction: column;\n"]))),Oa=He.b.div(Oe||(Oe=Object(Ie.a)(["\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  position: relative;\n"]))),ga=He.b.div(ge||(ge=Object(Ie.a)(['\n  /* The image used */\n  background-image: url("','");\n\n  /* Full height */\n  height: 100%;\n\n  /* Center and scale the image nicely */\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n\n  z-index: 50;\n  position: relative;\n'])),ja),ma=He.b.div(me||(me=Object(Ie.a)(["\n  position: absolute;\n  z-index: 51;\n  bottom: 20%;\n  width: 100%;\n  text-align: center;\n  color: #ffffff;\n  font-size: 16px;\n"]))),va=t.p+"static/media/bg.80d5f5e2.png",wa=t.p+"static/media/bar.8d9e0584.png",ya=t(64),ka=t.n(ya),Ca=function(){var e=dn().hasCameraSupport,n=Object(ye.useState)(""),t=Object(Ee.a)(n,2);t[0],t[1];return Object(Ze.jsx)(Sa,{children:Object(Ze.jsxs)("div",{style:Ia.container,children:[Object(Ze.jsx)("div",{style:Ia.spacer}),Object(Ze.jsxs)("text",{style:Ia.dateText,children:[" ",ka()().locale("zh").format("YYYY-MM-DD, dddd")]}),Object(Ze.jsxs)("div",{style:Ia.updateContainer,children:[e&&Object(Ze.jsx)(Me.b,{to:"/qrReader",children:Object(Ze.jsx)("img",{style:Ia.fullWidth,src:va,id:"bg",alt:"bg"})}),Object(Ze.jsxs)("text",{style:Ia.updateText,id:"update",children:[" ","\u6700\u5f8c\u66f4\u65b0".concat(ka()().locale("zh").format("YYYY-MM-DD"))]})]}),Object(Ze.jsx)("div",{style:Ia.whiteSpacer}),Object(Ze.jsx)("img",{style:Ia.fullWidth,src:wa,id:"bar",alt:"bar"})]})})},Sa=He.b.div(ve||(ve=Object(Ie.a)(["\n  width: 100%;\n  height: 100%;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n  display: flex;\n  flex-direction: column;\n"]))),Ia={container:{height:"inherit",flex:1,display:"flex",flexDirection:"column"},spacer:{height:16},dateText:{marginLeft:85/1079*window.innerWidth,color:"white",fontSize:18,fontFamily:"sans-serif",textShadow:"1.5px 1.5px #555555"},updateContainer:{flex:1,display:"flex",flexDirection:"column"},updateText:{position:"relative",left:130/1079*window.innerWidth,bottom:450/1079*window.innerWidth,fontSize:12,textShadow:"none"},whiteSpacer:{marginTop:-20,flex:1,display:"flex",backgroundColor:"white"},fullWidth:{width:"100%"}};var Ea=function(){var e=dn().hasCameraSupport,n=Object(ye.useState)(!(window.matchMedia("(display-mode: standalone)").matches||/\bmode=standalone\b/.test(window.location.hash)||"localhost"===window.location.hostname)),t=Object(Ee.a)(n,2);return t[0],t[1],Object(ye.useEffect)((function(){console.log(Ae.a.browserDetails.browser,Ae.a.browserDetails.version)}),[]),Object(ye.useEffect)((function(){var e=document.querySelector("#root");e&&Object(De.a)(e)}),[]),Object(Ze.jsxs)(Ze.Fragment,{children:[Object(Ze.jsx)(Da,{}),Object(Ze.jsx)(Me.a,{basename:"/",children:Object(Ze.jsxs)(Le,{children:[Object(Ze.jsx)(ze.b,{exact:!0,path:"/",children:Object(Ze.jsx)(Ca,{})}),Object(Ze.jsx)(ze.b,{exact:!0,path:"/qrGenerator",children:Object(Ze.jsx)(aa,{})}),Object(Ze.jsx)(ze.b,{exact:!0,path:"/confirm",children:Object(Ze.jsx)(ut,{})}),e&&Object(Ze.jsx)(ze.b,{exact:!0,path:"/qrReader",children:Object(Ze.jsx)(pa,{})}),e&&Object(Ze.jsx)(ze.b,{exact:!0,path:"/cameraSetting",children:Object(Ze.jsx)(hn,{})}),Object(Ze.jsx)(ze.a,{to:"/"})]})})]})},Da=Object(He.a)(we||(we=Object(Ie.a)(["\nhtml {\n  width: 100%;\n  height: 100%;\n}\n\nbody {\n  margin: 0;\n  font-family: Rubik, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  background-color:#13b088;\n  width: 100%;\n  height: 100%;\n}\n\ntextarea {\n  font-family: inherit;\n}\n\n\n#root {\n  width: 100%;\n  height: 100%;\n}\n\na {\n  text-decoration: none;\n}\n"]))),Ma=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function za(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}Se.a.render(Object(Ze.jsx)(ke.a.StrictMode,{children:Object(Ze.jsx)(sn,{children:Object(Ze.jsx)(Ea,{})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat(".","/service-worker.js");Ma?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):za(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):za(n,e)}))}}()}},[[188,1,2]]]);
//# sourceMappingURL=main.1d0f2e3a.chunk.js.map